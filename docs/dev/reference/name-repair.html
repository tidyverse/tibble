<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Repair the names of a vector â€” name-repair â€¢ tibble</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">

<meta property="og:title" content="Repair the names of a vector â€” name-repair" />

<meta property="og:description" content="tibble deals with a few levels of name repair:
minimal names exist. The names attribute is not NULL. The name of
an unnamed element is &quot;&quot; and never NA.
unique names are minimal, have no duplicates, and are never empty
(literally, no &quot;&quot;s).
syntactic names are unique and syntactic (see Details for more).
" />

<meta property="og:description" content="syntactic implies unique, unique implies minimal. These levels are
nested.
The .name_repair argument of tibble() and as_tibble() refers to these
levels. Alternatively, the user can pass their own name repair function. It
should anticipate minimal names as input and should, likewise, return names
that are at least minimal.
The &quot;Life cycle&quot; section explains the status of the existing functions
tidy_names(), set_tidy_names(), and repair_names()." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tibble</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.4.99.9004</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/tibble.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/extending.html">Extending tibble</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/tibble">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Repair the names of a vector</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/tibble/blob/master/R/repair-names.R'><code>R/repair-names.R</code></a></small>
    <div class="hidden name"><code>name-repair.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>tibble deals with a few levels of name repair:</p><ul>
<li><p><code>minimal</code> names exist. The <code>names</code> attribute is not <code>NULL</code>. The name of
an unnamed element is <code>""</code> and never <code>NA</code>.</p></li>
<li><p><code>unique</code> names are <code>minimal</code>, have no duplicates, and are never empty
(literally, no <code>""</code>s).</p></li>
<li><p><code>syntactic</code> names are <code>unique</code> and syntactic (see Details for more).</p></li>
</ul>

    <p><code>syntactic</code> implies <code>unique</code>, <code>unique</code> implies <code>minimal</code>. These levels are
nested.</p>
<p>The <code>.name_repair</code> argument of <code><a href='tibble.html'>tibble()</a></code> and <code><a href='as_tibble.html'>as_tibble()</a></code> refers to these
levels. Alternatively, the user can pass their own name repair function. It
should anticipate <code>minimal</code> names as input and should, likewise, return names
that are at least <code>minimal</code>.</p>
<p>The "Life cycle" section explains the status of the existing functions
<code>tidy_names()</code>, <code>set_tidy_names()</code>, and <code>repair_names()</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>tidy_names</span>(<span class='no'>name</span>, <span class='kw'>syntactic</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>set_tidy_names</span>(<span class='no'>x</span>, <span class='kw'>syntactic</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>repair_names</span>(<span class='no'>x</span>, <span class='kw'>prefix</span> <span class='kw'>=</span> <span class='st'>"V"</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>""</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>name</th>
      <td><p>A <code>names</code> attribute, usually a character vector.</p></td>
    </tr>
    <tr>
      <th>syntactic</th>
      <td><p>Should names be made syntactically valid via <code>make.names()</code>?</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Whether to suppress messages about name repair.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A vector.</p></td>
    </tr>
    <tr>
      <th>prefix</th>
      <td><p>A string, the prefix to use for new column names.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>A string inserted between the column name and de-duplicating
number.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>x</code> with repaired names or a repaired version of <code>name</code>.</p>
    
    <h2 class="hasAnchor" id="minimal-names"><a class="anchor" href="#minimal-names"></a><code>minimal</code> names</h2>

    
    <p><code>minimal</code> names exist. The <code>names</code> attribute is not <code>NULL</code>. The name of an
unnamed element is <code>""</code> and never <code>NA</code>.</p>
<p><code>tbl_df</code> objects created by <code><a href='tibble.html'>tibble()</a></code> and <code><a href='as_tibble.html'>as_tibble()</a></code> have variable names
that are <code>minimal</code>, at the very least, even when <code>.name_repair = "none"</code>.
Why? General name repair can be be implemented more simply if the baseline
strategy ensures that <code>names(x)</code> returns a character vector of the correct
length.</p>
<p>Examples:</p><pre>Original names of a vector with length 3: NULL
                           minimal names: "" "" ""
    Original names: "x" NA
                           minimal names: "x" ""
</pre>
    <p>Related: <code><a href='http://www.rdocumentation.org/packages/rlang/topics/names2'>rlang::names2()</a></code> returns the names of an object, after making them
<code>minimal</code>.</p>
    
    <h2 class="hasAnchor" id="unique-names"><a class="anchor" href="#unique-names"></a><code>unique</code> names</h2>

    
    <p><code>unique</code> names are <code>minimal</code>, have no duplicates, and are never empty
(literally, no <code>""</code>s).</p>
<p>You usually want <code>unique</code> variable names in a data.frame, because they ensure
that any variable can be identified, uniquely, by its name. Indexing by name
works.</p>
<p>There are many ways to make names <code>unique</code>. We append a suffix of the form
<code>..j</code> to any name that is <code>""</code> or a duplicate, where <code>j</code> is the position.
Why?</p><ul>
<li><p>An absolute position <code>j</code> is more helpful than numbering within the columns
that share a name. Context: troubleshooting data import with lots of columns
and dysfunctional names.</p></li>
<li><p>We hypothesize that it's better have a "level playing field" when repairing
names, i.e. if <code>foo</code> appears twice, they both get repaired, not just the
second occurence.</p></li>
</ul>
    <p>Example:</p><pre>Original names:    ""    "x"    "" "y"    "x"
  unique names: "..1" "x..2" "..3" "y" "x..5"
</pre>
    <p>Why would you ever want <code>minimal</code> names, instead of <code>unique</code> or <code>syntactic</code>
ones? Sometimes the first row of a data source -- allegedly variable names --
actually contains <strong>data</strong> and the resulting tibble will be reshaped with,
e.g., <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/gather'>tidyr::gather()</a></code>. In this case, it is better to not munge the names at
import.</p>
<p>Pre-existing suffixes of the form <code>..j</code> are always stripped, prior to making
names <code>unique</code>, i.e. reconstructing the suffixes. If this interacts poorly
with your names, you should take control of name repair.</p>
    
    <h2 class="hasAnchor" id="syntactic-names"><a class="anchor" href="#syntactic-names"></a><code>syntactic</code> names</h2>

    
    <p><code>syntactic</code> names are <code>unique</code> and syntactic (see <code>make.names()</code>), meaning
they:</p><ul>
<li><p>Have no duplicates (inherited from <code>unique</code>).</p></li>
<li><p>Consist of letters, numbers, and the dot <code>.</code> or underscore <code>_</code>
characters.</p></li>
<li><p>Start with a letter or the dot <code>.</code>, not followed by a number.</p></li>
<li><p>Not a reserved word.</p></li>
</ul>
    <p><code>syntactic</code> names are easy to use "as is" in code. They do not require
quoting and work well with nonstandard evaluation, such as list indexing via
<code>$</code> or in packages like dplyr and ggplot2.</p>
<p>There are many ways to make names <code>syntactic</code>. For example, we choose to
define <code>syntactic</code> names as an extension of <code>unique</code>, i.e. <code>syntactic</code>
implies unique. Why? Because the need for syntactic names is strongly
associated with the need for uniqueness and this makes the name repair system
simpler.</p>
    
    <h2 class="hasAnchor" id="life-cycle"><a class="anchor" href="#life-cycle"></a>Life cycle</h2>

    
    <p><code>tidy_names()</code>, <code>set_tidy_names()</code>, and <code>repair_names()</code> were early efforts
to facilitate <em>post hoc</em> name repair in tibble, given that <code><a href='tibble.html'>tibble()</a></code> and
<code><a href='as_tibble.html'>as_tibble()</a></code> did not do this.</p>
<p>From tibble v1.5.0, the <code>.name_repair</code> argument gives direct access to three
specific levels of name repair: <code>minimal</code>, <code>unique</code>, and <code>syntactic</code>. We
recommend that new code use this instead of <code>tidy_names()</code>,
<code>set_tidy_names()</code>, or <code>repair_names()</code>. After a period of use, the repair
stategies behind <code>minimal</code>, <code>unique</code>, and <code>syntactic</code> are likely to be
exposed in standalone functions and this could affect the behaviour of
<code>tidy_names()</code>. <code>repair_names()</code> should be considered deprecated.</p><pre>tibble(..., `.name_repair = "unique"`)
## is preferred to
df &lt;- tibble(...)
set_tidy_names(df, syntactic = FALSE)
    tibble(..., `.name_repair = "syntactic"`)
## is preferred to
df &lt;- tibble(...)
set_tidy_names(df, syntactic = TRUE)
</pre>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>## by default, duplicate names are not allowed</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='co'># }</span><div class='input'><span class='co'>## you can authorize duplicate names</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"none"</span>)</div><div class='output co'>#&gt; [90m# A tibble: 1 x 2[39m
#&gt;       x     x
#&gt;   [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m
#&gt; [90m1[39m     1     2</div><div class='input'><span class='co'>## or request that the names be made unique</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"unique"</span>)</div><div class='output co'>#&gt; <span class='message'>New names:</span>
#&gt; <span class='message'>* x -&gt; x..1</span>
#&gt; <span class='message'>* x -&gt; x..2</span></div><div class='output co'>#&gt; [90m# A tibble: 1 x 2[39m
#&gt;    x..1  x..2
#&gt;   [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m
#&gt; [90m1[39m     1     2</div><div class='input'>
<span class='co'>## by default, non-syntactic names are allowed</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`a 1`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`a 2`</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='co'>## because you can still index by name</span>
<span class='no'>df</span><span class='kw'>[[</span><span class='st'>"a 1"</span>]]</div><div class='output co'>#&gt; [1] 1</div><div class='input'><span class='no'>df</span>$<span class='no'>`a 1`</span></div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'>## syntactic names are easier to work with, though, and you can request them</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`a 1`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`a 2`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"syntactic"</span>)</div><div class='output co'>#&gt; <span class='message'>New names:</span>
#&gt; <span class='message'>* `a 1` -&gt; a.1</span>
#&gt; <span class='message'>* `a 2` -&gt; a.2</span></div><div class='input'><span class='no'>df</span>$<span class='no'>a.1</span></div><div class='output co'>#&gt; [1] 1</div><div class='input'>
<span class='co'>## you can specify your own name repair function</span>
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='no'>make.unique</span>)</div><div class='output co'>#&gt; [90m# A tibble: 1 x 2[39m
#&gt;       x   x.1
#&gt;   [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m
#&gt; [90m1[39m     1     2</div><div class='input'>
<span class='no'>fix_names</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>gsub</span>(<span class='st'>"%"</span>, <span class='st'>" percent"</span>, <span class='no'>x</span>)
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`25%`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`75%`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='no'>fix_names</span>)</div><div class='output co'>#&gt; [90m# A tibble: 1 x 2[39m
#&gt;   `25 percent` `75 percent`
#&gt;          [3m[90m&lt;dbl&gt;[39m[23m        [3m[90m&lt;dbl&gt;[39m[23m
#&gt; [90m1[39m            1            2</div><div class='input'>
<span class='no'>fix_names</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'>gsub</span>(<span class='st'>"\\s+"</span>, <span class='st'>"_"</span>, <span class='no'>x</span>)
<span class='fu'><a href='tibble.html'>tibble</a></span>(<span class='kw'>`year 1`</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>`year 2`</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='no'>fix_names</span>)</div><div class='output co'>#&gt; [90m# A tibble: 1 x 2[39m
#&gt;   year_1 year_2
#&gt;    [3m[90m&lt;dbl&gt;[39m[23m  [3m[90m&lt;dbl&gt;[39m[23m
#&gt; [90m1[39m      1      2</div><div class='input'>
<span class='co'>## the names attibute will be non-NULL, with "" as the default element</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='as_tibble.html'>as_tibble</a></span>(<span class='fu'>list</span>(<span class='fl'>1</span>:<span class='fl'>3</span>, <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]), <span class='kw'>.name_repair</span> <span class='kw'>=</span> <span class='st'>"none"</span>)
<span class='fu'>names</span>(<span class='no'>df</span>)</div><div class='output co'>#&gt; [1] "" ""</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#minimal-names"><code>minimal</code> names</a></li>

      <li><a href="#unique-names"><code>unique</code> names</a></li>

      <li><a href="#syntactic-names"><code>syntactic</code> names</a></li>

      <li><a href="#life-cycle">Life cycle</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>tibble is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://krlmlr.info'>Kirill MÃ¼ller</a>, <a href='http://hadley.nz'>Hadley Wickham</a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>
      </footer>
   </div>

  

  </body>
</html>

