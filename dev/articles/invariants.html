<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invariants for subsetting and subassignment • tibble</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet">
<!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Invariants for subsetting and subassignment">
<meta property="og:description" content="">
<meta property="og:image" content="https://tibble.tidyverse.org/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tibble</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.99.99.9005</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/tibble.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/extending.html">Extending tibble</a>
    </li>
    <li>
      <a href="../articles/subset.html">Subsetting</a>
    </li>
    <li>
      <a href="../articles/subassign.html">Subassignment</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/03/tibble-2.1.1/">Version 2.1.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/tibble-2.0.1/">Version 2.0.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/11/tibble-2.0.0-pre-announce/">Version 2.0.0 pre-announcement</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/01/tibble-1-4-2/">Version 1.4.2</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/01/tibble-1-4-1/">Version 1.4.1</a>
    </li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/tibble">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Invariants for subsetting and subassignment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/tibble/blob/master/vignettes/invariants.Rmd"><code>vignettes/invariants.Rmd</code></a></small>
      <div class="hidden name"><code>invariants.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.dftbl {
    width: 100%;
    table-layout: fixed;
    display: inline-table;
}

.error pre code {
    color: red;
}

.warning pre code {
    color: violet;
}
</style>
<p>This vignette defines invariants for subsetting and subset-assignment for tibbles, and illustrates where their behaviour differs from data frames. The goal is to define a small set of invariants that consistently define how behaviors interact. Some behaviors are defined using functions of the vctrs package, e.g. <code><a href="https://rdrr.io/pkg/vctrs/man/vec_slice.html">vctrs::vec_slice()</a></code>, <code><a href="https://rdrr.io/pkg/vctrs/man/vec_recycle.html">vctrs::vec_recycle()</a></code> and <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vctrs::vec_as_index()</a></code>. Refer to their documentation for more details about the invariants that they follow.</p>
<p>The subsetting and subassignment operators for data frames and tibbles are particularly tricky, because they support both row and column indexes, both of which are optionally missing. We resolve this by first defining column access with <code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code> and <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code>, then column-wise subsetting with <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code>, then row-wise subsetting, then the composition of both.</p>
<div id="conventions" class="section level2">
<h2 class="hasAnchor">
<a href="#conventions" class="anchor"></a>Conventions</h2>
<p>In this article, all behaviors are demonstrated using one example data frame and its tibble equivalent:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(vctrs)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">new_df &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">n =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  df<span class="op">$</span>c &lt;-<span class="st"> </span>letters[<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>]</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  df<span class="op">$</span>li &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">9</span>, <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>, <span class="dv">12</span><span class="op">:</span><span class="dv">14</span>, <span class="st">"text"</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  df</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">new_tbl &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="kw"><a href="../reference/as_tibble.html">as_tibble</a></span>(<span class="kw">new_df</span>())</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">}</a></code></pre></div>
<p>Results of the same code for data frames and tibbles are presented side by side:</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">new_df</span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">new_tbl</span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>If the results are identical (after converting to a data frame if necessary), only the tibble result is shown.</p>
<p>Subsetting operations are read-only. The same objects are reused in all examples:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">new_df</span>()</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">tbl &lt;-<span class="st"> </span><span class="kw">new_tbl</span>()</a></code></pre></div>
<p>Where needed, we also show examples with hierarchical columns containing a data frame or a matrix:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">new_tbl2 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">  <span class="kw"><a href="../reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">tb =</span> tbl,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">    <span class="dt">m =</span> <span class="kw"><a href="https://rdrr.io/r/base/diag.html">diag</a></span>(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">new_df2 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">  df2 &lt;-<span class="st"> </span><span class="kw">new_tbl2</span>()</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">  <span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(df2) &lt;-<span class="st"> "data.frame"</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">  <span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(df2<span class="op">$</span>tb) &lt;-<span class="st"> "data.frame"</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">  df2</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">df2 &lt;-<span class="st"> </span><span class="kw">new_df2</span>()</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">tbl2 &lt;-<span class="st"> </span><span class="kw">new_tbl2</span>()</a></code></pre></div>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">new_tbl</span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>For subset assignment (subassignment, for short), we need a fresh copy of the data for each test. The <code>with_*()</code> functions (omitted here for brevity) allow for a more concise notation. These functions take an assignment expression, execute it on a fresh copy of the data, and return the data for printing. The first example prints what’s really executed, further examples omit this output.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">with_df</span>(df<span class="op">$</span>n &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(df<span class="op">$</span>n), <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;   df &lt;- new_df()</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;   df$n &lt;- rev(df$n)</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;   df</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 1 4 e          9</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 2 3 f     10, 11</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 3 2 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 4 1 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span>n &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(tbl<span class="op">$</span>n), <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;   tbl &lt;- new_tbl()</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;   tbl$n &lt;- rev(tbl$n)</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;   tbl</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 1     4 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 2     3 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; 3     2 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
</div>
<div id="column-extraction" class="section level2">
<h2 class="hasAnchor">
<a href="#column-extraction" class="anchor"></a>Column extraction</h2>
<div id="definition-of-xj" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xj" class="anchor"></a>Definition of <code>x[[j]]</code>
</h3>
<p><code>x[[j]]</code> is equal to <code><a href="https://rdrr.io/r/base/base-internal.html">.subset2(x, j)</a></code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">tbl[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl[[<span class="dv">3</span>]], <span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2[[<span class="st">"tbl"</span>]], <span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl2, <span class="st">"tbl"</span>))</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>NB: <code>x[[j]]</code> always returns an object of size <code><a href="https://rdrr.io/r/base/nrow.html">nrow(x)</a></code> if the column exists.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>j</code> must be a single number or a string, as enforced by <code><a href="https://rdrr.io/r/base/base-internal.html">.subset2(x, j)</a></code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Calling `[[` with a vector
#&gt; of length 2 (recursive subsetting)
#&gt; is deprecated and will eventually be
#&gt; converted to an error.</code></pre>
</div>
<pre><code>#&gt; [1] 2</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">df[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): subscript out of bounds</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">tbl[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">df[[<span class="ot">TRUE</span>]]</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">tbl[[<span class="ot">TRUE</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_double_bracket_logical():
#&gt; could not find function
#&gt; "error_double_bracket_logical"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">df[[mean]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): invalid subscript type
#&gt; 'closure'</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">tbl[[mean]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, j): invalid
#&gt; subscript type 'closure'</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>NA</code> indexes, numeric out-of-bounds (OOB) values, and non-integers throw an error:</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">tbl[[<span class="ot">NA</span>]]</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">tbl[[<span class="ot">NA_character_</span>]] <span class="co"># </span><span class="al">FIXME</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">tbl[[<span class="ot">NA_integer_</span>]] <span class="co"># </span><span class="al">FIXME</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">df[[<span class="op">-</span><span class="dv">1</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): attempt to select more than
#&gt; one element in get1index &lt;real&gt;</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">tbl[[<span class="op">-</span><span class="dv">1</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">df[[<span class="dv">4</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): subscript out of bounds</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">tbl[[<span class="dv">4</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 3 and you've
#&gt; tried to subset element 4.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">df[[<span class="fl">1.5</span>]]</a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">tbl[[<span class="fl">1.5</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Lossy cast from &lt;double&gt; to
#&gt; &lt;integer&gt;.
#&gt; Locations: 1</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">df[[<span class="ot">Inf</span>]]</a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">tbl[[<span class="ot">Inf</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Lossy cast from &lt;double&gt; to
#&gt; &lt;integer&gt;.
#&gt; Locations: 1</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>Character OOB access is silent because a common package idiom is to check for the absence of a column with <code><a href="https://rdrr.io/r/base/NULL.html">is.null(df[[var]])</a></code>.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">tbl[[<span class="st">"x"</span>]]</a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
</tr></tbody></table>
</div>
<div id="definition-of-xname" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xname" class="anchor"></a>Definition of <code>x$name</code>
</h3>
<p><code>x$name</code> and <code>x$"name"</code> are equal to <code>x[["name"]]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">tbl<span class="op">$</span>n</a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">tbl<span class="op">$</span><span class="st">"n"</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">tbl[[<span class="st">"n"</span>]]</a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl<span class="op">$</span>li, tbl[[<span class="st">"li"</span>]])</a>
<a class="sourceLine" id="cb53-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2<span class="op">$</span>tb, tbl2[[<span class="st">"tb"</span>]])</a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2<span class="op">$</span>m, tbl2[[<span class="st">"m"</span>]])</a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>Unlike data frames, tibbles do not partially match names.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">df<span class="op">$</span>l</a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb56-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb56-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb56-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb56-6" data-line-number="6"><span class="co">#&gt; [1] 10 11</span></a>
<a class="sourceLine" id="cb56-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb56-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb56-9" data-line-number="9"><span class="co">#&gt; [1] 12 13 14</span></a>
<a class="sourceLine" id="cb56-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb56-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb56-12" data-line-number="12"><span class="co">#&gt; [1] "text"</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">tbl<span class="op">$</span>l</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Unknown or uninitialised
#&gt; column: `l`.</code></pre>
</div>
<pre><code>#&gt; NULL</code></pre>
</td>
</tr></tbody></table>
<p>Because <code>df$x</code> is rarely used in packages, it can raise a warning:</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">df<span class="op">$</span>not_present</a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1">tbl<span class="op">$</span>not_present</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Unknown or uninitialised
#&gt; column: `not_present`.</code></pre>
</div>
<pre><code>#&gt; NULL</code></pre>
</td>
</tr></tbody></table>
</div>
</div>
<div id="column-subsetting" class="section level2">
<h2 class="hasAnchor">
<a href="#column-subsetting" class="anchor"></a>Column subsetting</h2>
<div id="definition-of-xj-" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xj-" class="anchor"></a>Definition of <code>x[j]</code>.</h3>
<p><code>j</code> is converted to an integer vector by <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vctrs::vec_as_index(j, ncol(x), names = names(x))</a></code>. Then <code>x[c(j_1, j_2, ..., j_n)]</code> is equivalent to <code><a href="../reference/tibble.html">tibble(x[[j_1]], x[[j_2]], ..., x[[j_3]])</a></code>, keeping the corresponding column names. This implies that <code>j</code> must be a numeric or character vector, or a logical vector with length 1 or <code><a href="https://rdrr.io/r/base/nrow.html">ncol(x)</a></code>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="co">#&gt;       n c    </span></a>
<a class="sourceLine" id="cb64-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="co">#&gt; 1     1 e    </span></a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="co">#&gt; 2     2 f    </span></a>
<a class="sourceLine" id="cb64-7" data-line-number="7"><span class="co">#&gt; 3     3 g    </span></a>
<a class="sourceLine" id="cb64-8" data-line-number="8"><span class="co">#&gt; 4     4 h</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>When subsetting repeated indexes, the resulting column names are undefined, do not rely on them.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="co">#&gt;   n n.1</span></a>
<a class="sourceLine" id="cb65-3" data-line-number="3"><span class="co">#&gt; 1 1   1</span></a>
<a class="sourceLine" id="cb65-4" data-line-number="4"><span class="co">#&gt; 2 2   2</span></a>
<a class="sourceLine" id="cb65-5" data-line-number="5"><span class="co">#&gt; 3 3   3</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6"><span class="co">#&gt; 4 4   4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>)]</a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb66-3" data-line-number="3"><span class="co">#&gt;       n     n</span></a>
<a class="sourceLine" id="cb66-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb66-5" data-line-number="5"><span class="co">#&gt; 1     1     1</span></a>
<a class="sourceLine" id="cb66-6" data-line-number="6"><span class="co">#&gt; 2     2     2</span></a>
<a class="sourceLine" id="cb66-7" data-line-number="7"><span class="co">#&gt; 3     3     3</span></a>
<a class="sourceLine" id="cb66-8" data-line-number="8"><span class="co">#&gt; 4     4     4</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>For tibbles with repeated column names, subsetting by name uses the first matching column.</p>
<p><code><a href="https://rdrr.io/r/base/nrow.html">nrow(df[j])</a></code> equals <code><a href="https://rdrr.io/r/base/nrow.html">nrow(df)</a></code>.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/integer.html">integer</a></span>()]</a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 0</span></a></code></pre></div>
</td>
</tr></tbody></table>
</div>
<div id="definition-of-x-j" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-x-j" class="anchor"></a>Definition of <code>x[, j]</code>
</h3>
<p><code>x[, j]</code> is equal to <code>x[j]</code>. Tibbles do not perform column extraction if <code>x[j]</code> would yield a single column.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">df[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">tbl[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb69-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb69-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb69-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a>
<a class="sourceLine" id="cb69-6" data-line-number="6"><span class="co">#&gt; 2     2</span></a>
<a class="sourceLine" id="cb69-7" data-line-number="7"><span class="co">#&gt; 3     3</span></a>
<a class="sourceLine" id="cb69-8" data-line-number="8"><span class="co">#&gt; 4     4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">tbl[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb70-3" data-line-number="3"><span class="co">#&gt;       n c    </span></a>
<a class="sourceLine" id="cb70-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb70-5" data-line-number="5"><span class="co">#&gt; 1     1 e    </span></a>
<a class="sourceLine" id="cb70-6" data-line-number="6"><span class="co">#&gt; 2     2 f    </span></a>
<a class="sourceLine" id="cb70-7" data-line-number="7"><span class="co">#&gt; 3     3 g    </span></a>
<a class="sourceLine" id="cb70-8" data-line-number="8"><span class="co">#&gt; 4     4 h</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>], tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>])</a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-x-j-drop-true" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-x-j-drop-true" class="anchor"></a>Definition of <code>x[, j, drop = TRUE]</code>
</h3>
<p>For backward compatiblity, <code>x[, j, drop = TRUE]</code> performs column <strong>extraction</strong>, returning <code>x[j][[1]]</code> when <code><a href="https://rdrr.io/r/base/nrow.html">ncol(x[j])</a></code> is 1.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">tbl[, <span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb73-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr></tbody></table>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl[, <span class="dv">3</span>, <span class="dt">drop =</span> <span class="ot">TRUE</span>], tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2[, <span class="dv">1</span>, <span class="dt">drop =</span> <span class="ot">TRUE</span>], tbl2[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2[, <span class="dv">2</span>, <span class="dt">drop =</span> <span class="ot">TRUE</span>], tbl2[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb76-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="row-subsetting" class="section level2">
<h2 class="hasAnchor">
<a href="#row-subsetting" class="anchor"></a>Row subsetting</h2>
<div id="definition-of-xi" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi" class="anchor"></a>Definition of <code>x[i, ]</code>
</h3>
<p><code>x[i, ]</code> is equal to <code><a href="../reference/tibble.html">tibble(vec_slice(x[[1]], i), vec_slice(x[[2]], i), ...)</a></code>.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">tbl[<span class="dv">3</span>, ]</a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb77-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb77-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb77-5" data-line-number="5"><span class="co">#&gt; 1     3 g     &lt;int [3]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>This means that <code>i</code> must be a numeric vector, or a logical vector of length <code><a href="https://rdrr.io/r/base/nrow.html">nrow(x)</a></code> or 1. For compatibility, <code>i</code> can also be a character vector containing positive numbers.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">df[mean, ]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in xj[i]: invalid subscript
#&gt; type 'closure'</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">tbl[mean, ]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: `i` must be an integer,
#&gt; character, or logical vector, not a
#&gt; closure.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">1</span>), ]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in xj[i]: invalid subscript
#&gt; type 'list'</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">1</span>), ]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: `i` must be an integer,
#&gt; character, or logical vector, not a
#&gt; list.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1">tbl[<span class="st">"1"</span>, ]</a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb86-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>Exception: OOB values generate warnings instead of errors:</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1">df[<span class="dv">10</span>, ]</a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="co">#&gt;     n    c   li</span></a>
<a class="sourceLine" id="cb87-3" data-line-number="3"><span class="co">#&gt; NA NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1">tbl[<span class="dv">10</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Row indexes must be between 0
#&gt; and the number of rows (4). Use `NA` as
#&gt; row index to obtain a row full of `NA`
#&gt; values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 1 x 3
#&gt;       n c     li    
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;
#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1">df[<span class="st">"x"</span>, ]</a>
<a class="sourceLine" id="cb91-2" data-line-number="2"><span class="co">#&gt;     n    c   li</span></a>
<a class="sourceLine" id="cb91-3" data-line-number="3"><span class="co">#&gt; NA NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1">tbl[<span class="st">"x"</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Only valid row names can be
#&gt; used for indexing. Use `NA` as row index
#&gt; to obtain a row full of `NA` values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 1 x 3
#&gt;       n c     li    
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;
#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
</tbody></table>
<p>Unlike data frames, only logical vectors of length 1 are recycled. <!-- TODO: should this be an error? #648 --></p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ]</a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Length of logical index must be
#&gt; 1 or 4, not 2</code></pre>
</div>
<pre><code>#&gt; # A tibble: 2 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     3 g     &lt;int [3]&gt;</code></pre>
</td>
</tr></tbody></table>
<p>NB: scalar logicals are recycled, but scalar numerics are not. That makes the <code>x[NA, ]</code> and <code>x[NA_integer_, ]</code> return different results.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1">tbl[<span class="ot">NA</span>, ]</a>
<a class="sourceLine" id="cb99-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb99-3" data-line-number="3"><span class="co">#&gt;       n c     li    </span></a>
<a class="sourceLine" id="cb99-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;</span></a>
<a class="sourceLine" id="cb99-5" data-line-number="5"><span class="co">#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</span></a>
<a class="sourceLine" id="cb99-6" data-line-number="6"><span class="co">#&gt; 2    NA &lt;NA&gt;  &lt;NULL&gt;</span></a>
<a class="sourceLine" id="cb99-7" data-line-number="7"><span class="co">#&gt; 3    NA &lt;NA&gt;  &lt;NULL&gt;</span></a>
<a class="sourceLine" id="cb99-8" data-line-number="8"><span class="co">#&gt; 4    NA &lt;NA&gt;  &lt;NULL&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1">tbl[<span class="ot">NA_integer_</span>, ]</a>
<a class="sourceLine" id="cb100-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb100-3" data-line-number="3"><span class="co">#&gt;       n c     li    </span></a>
<a class="sourceLine" id="cb100-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;</span></a>
<a class="sourceLine" id="cb100-5" data-line-number="5"><span class="co">#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xi-drop-true" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi-drop-true" class="anchor"></a>Definition of <code>x[i, , drop = TRUE]</code>
</h3>
<p><code>drop = TRUE</code> has no effect when not selecting a single row:</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">df[<span class="dv">1</span>, , drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb101-2" data-line-number="2"><span class="co">#&gt; $n</span></a>
<a class="sourceLine" id="cb101-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb101-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb101-5" data-line-number="5"><span class="co">#&gt; $c</span></a>
<a class="sourceLine" id="cb101-6" data-line-number="6"><span class="co">#&gt; [1] "e"</span></a>
<a class="sourceLine" id="cb101-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb101-8" data-line-number="8"><span class="co">#&gt; $li</span></a>
<a class="sourceLine" id="cb101-9" data-line-number="9"><span class="co">#&gt; $li[[1]]</span></a>
<a class="sourceLine" id="cb101-10" data-line-number="10"><span class="co">#&gt; [1] 9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">tbl[<span class="dv">1</span>, , drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb102-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb102-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb102-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<!-- TODO: soft-deprecate -->
</div>
</div>
<div id="row-and-column-subsetting" class="section level2">
<h2 class="hasAnchor">
<a href="#row-and-column-subsetting" class="anchor"></a>Row and column subsetting</h2>
<div id="definition-of-x-and-x" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-x-and-x" class="anchor"></a>Definition of <code>x[]</code> and <code>x[,]</code>
</h3>
<p><code>x[]</code> and <code>x[,]</code> are equivalent to <code>x</code>.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
</div>
<div id="definition-of-xi-j" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi-j" class="anchor"></a>Definition of <code>x[i, j]</code>
</h3>
<p><code>x[i, j]</code> is equal to <code>x[i, ][j]</code>.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1">df[<span class="dv">1</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">tbl[<span class="dv">1</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb104-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb104-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb104-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb104-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1">tbl[<span class="dv">1</span>, ][<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb105-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb105-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb105-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb105-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl[<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>], tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>][<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>], tbl[<span class="dv">1</span>][<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ])</a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>][<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ])</a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xi-j-1" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi-j-1" class="anchor"></a>Definition of <code>x[[i, j]]</code>
</h3>
<p><code>i</code> must be a numeric vector of length 1. <code>x[[i, j]]</code> is equal to <code>x[i, ][[j]]</code>.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></p>
<p>This implies that <code>j</code> must be a numeric or character vector of length 1.</p>
<p>NB: <code><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vctrs::vec_size(x[[i, j]])</a></code> always equals 1. Unlike <code>x[i, ]</code>, <code>x[[i, ]]</code> is not valid.</p>
</div>
</div>
<div id="column-update" class="section level2">
<h2 class="hasAnchor">
<a href="#column-update" class="anchor"></a>Column update</h2>
<div id="definition-of-xj---a-" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xj---a-" class="anchor"></a>Definition of <code>x[[j]] &lt;- a</code>.</h3>
<p><code>x[[j]] &lt;- a</code> corresponds to <code>x &lt;- tibble(x[[j_1]], x[[j_2]], ..., a, ..., x[[j_n]])</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb109-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb109-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb109-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb109-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb109-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="co">#&gt;       n c        li</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5"><span class="co">#&gt; 1     1 e         4</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6"><span class="co">#&gt; 2     2 f         3</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7"><span class="co">#&gt; 3     3 g         2</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8"><span class="co">#&gt; 4     4 h         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3"><span class="co">#&gt;      tb m[,1]  [,2]  [,3]  [,4]</span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb111-5" data-line-number="5"><span class="co">#&gt; 1     0     1     0     0     0</span></a>
<a class="sourceLine" id="cb111-6" data-line-number="6"><span class="co">#&gt; 2     0     0     1     0     0</span></a>
<a class="sourceLine" id="cb111-7" data-line-number="7"><span class="co">#&gt; 3     0     0     0     1     0</span></a>
<a class="sourceLine" id="cb111-8" data-line-number="8"><span class="co">#&gt; 4     0     0     0     0     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb112-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li           m</span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     4</span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     3</span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     2</span></a>
<a class="sourceLine" id="cb112-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     1</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>For this, <code>j</code> must be a scalar numeric or a string, and cannot be <code>NA</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb113-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb113-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb113-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb113-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"c"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb114-3" data-line-number="3"><span class="co">#&gt;       n     c li       </span></a>
<a class="sourceLine" id="cb114-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb114-5" data-line-number="5"><span class="co">#&gt; 1     1     0 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb114-6" data-line-number="6"><span class="co">#&gt; 2     2     0 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb114-7" data-line-number="7"><span class="co">#&gt; 3     3     0 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb114-8" data-line-number="8"><span class="co">#&gt; 4     4     0 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">TRUE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb115-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb115-3" data-line-number="3"><span class="co">#&gt; 1 0 e          9</span></a>
<a class="sourceLine" id="cb115-4" data-line-number="4"><span class="co">#&gt; 2 0 f     10, 11</span></a>
<a class="sourceLine" id="cb115-5" data-line-number="5"><span class="co">#&gt; 3 0 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb115-6" data-line-number="6"><span class="co">#&gt; 4 0 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">TRUE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-`(`*tmp*`, i, value =
#&gt; value): recursive indexing failed at
#&gt; level 2</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: more
#&gt; elements supplied than there are to
#&gt; replace</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">FALSE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: attempt to
#&gt; select less than one element in
#&gt; integerOneIndex</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">FALSE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: more
#&gt; elements supplied than there are to
#&gt; replace</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">NA_integer_</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: attempt to
#&gt; select more than one element in
#&gt; integerOneIndex</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">NA_integer_</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">NA</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: attempt to
#&gt; select more than one element in
#&gt; integerOneIndex</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">NA</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">NA_character_</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in if (names(x)[nc] == "")
#&gt; names(x)[nc] &lt;- paste0("V", nc):
#&gt; missing value where TRUE/FALSE
#&gt; needed</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">NA_character_</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size(a)</a></code> must be <code><a href="https://rdrr.io/r/base/nrow.html">nrow(x)</a></code> or 1. Recycling also works for list, data frame, and matrix columns.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb146-6" data-line-number="6"><span class="co">#&gt; 2     1 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb146-7" data-line-number="7"><span class="co">#&gt; 3     1 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb146-8" data-line-number="8"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb147-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb147-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb147-5" data-line-number="5"><span class="co">#&gt; 1     4 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb147-6" data-line-number="6"><span class="co">#&gt; 2     3 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb147-7" data-line-number="7"><span class="co">#&gt; 3     2 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb147-8" data-line-number="8"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; 1, value = 3:1): replacement has 3
#&gt; rows, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb152-3" data-line-number="3"><span class="co">#&gt; 1 2 e          9</span></a>
<a class="sourceLine" id="cb152-4" data-line-number="4"><span class="co">#&gt; 2 1 f     10, 11</span></a>
<a class="sourceLine" id="cb152-5" data-line-number="5"><span class="co">#&gt; 3 2 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb152-6" data-line-number="6"><span class="co">#&gt; 4 1 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"li"</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb155-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb155-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb155-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb155-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb155-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb155-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb155-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="st">"tb"</span>]] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; "tb", value = structure(list(n = 1L,
#&gt; : replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="st">"tb"</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb158-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb158-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb158-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb158-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb158-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1…     0     1     0</span></a>
<a class="sourceLine" id="cb158-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1…     0     0     1</span></a>
<a class="sourceLine" id="cb158-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1…     0     0     0</span></a>
<a class="sourceLine" id="cb158-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="st">"m"</span>]] &lt;-<span class="st"> </span>df2[[<span class="st">"m"</span>]][<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; "m", value = structure(c(1, 0, 0, :
#&gt; replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="st">"m"</span>]] &lt;-<span class="st"> </span>tbl2[[<span class="st">"m"</span>]][<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a>
<a class="sourceLine" id="cb161-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb161-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb161-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb161-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb161-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     1     0     0</span></a>
<a class="sourceLine" id="cb161-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     1     0     0</span></a>
<a class="sourceLine" id="cb161-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     1     0     0</span></a>
<a class="sourceLine" id="cb161-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>New columns are appended at the end, with name repair if needed.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb162-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb162-3" data-line-number="3"><span class="co">#&gt;       n c     li            x</span></a>
<a class="sourceLine" id="cb162-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb162-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     0</span></a>
<a class="sourceLine" id="cb162-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     0</span></a>
<a class="sourceLine" id="cb162-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     0</span></a>
<a class="sourceLine" id="cb162-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">4</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb163-2" data-line-number="2"><span class="co">#&gt;   n c         li V4</span></a>
<a class="sourceLine" id="cb163-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9  0</span></a>
<a class="sourceLine" id="cb163-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11  0</span></a>
<a class="sourceLine" id="cb163-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14  0</span></a>
<a class="sourceLine" id="cb163-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text  0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">4</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb164-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb164-3" data-line-number="3"><span class="co">#&gt;       n c     li         ...4</span></a>
<a class="sourceLine" id="cb164-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb164-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     0</span></a>
<a class="sourceLine" id="cb164-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     0</span></a>
<a class="sourceLine" id="cb164-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     0</span></a>
<a class="sourceLine" id="cb164-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">5</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in format.data.frame(if (omit)
#&gt; x[seq_len(n0), , drop = FALSE] else
#&gt; x, : corrupt data frame: columns will be
#&gt; truncated or padded with NAs</code></pre>
</div>
<pre><code>#&gt;   n c         li      V5
#&gt; 1 1 e          9 NULL  0
#&gt; 2 2 f     10, 11 &lt;NA&gt;  0
#&gt; 3 3 g 12, 13, 14 &lt;NA&gt;  0
#&gt; 4 4 h       text &lt;NA&gt;  0</code></pre>
</td>
<td>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">5</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_at_end_only():
#&gt; could not find function
#&gt; "error_new_columns_at_end_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>The type of an existing column can be changed, also across the principal column types:</p>
<ul>
<li>atomic: <code>df[[1]]</code> and <code>df[[2]]</code>
</li>
<li>list: <code>df[[3]]</code>
</li>
<li>data frame: <code>df2[[1]]</code>
</li>
<li>matrix: <code>df2[[2]]</code>
</li>
</ul>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb170-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb170-3" data-line-number="3"><span class="co">#&gt;   n     c     li       </span></a>
<a class="sourceLine" id="cb170-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb170-5" data-line-number="5"><span class="co">#&gt; 1 e     e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb170-6" data-line-number="6"><span class="co">#&gt; 2 f     f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb170-7" data-line-number="7"><span class="co">#&gt; 3 g     g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb170-8" data-line-number="8"><span class="co">#&gt; 4 h     h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">2</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb171-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb171-3" data-line-number="3"><span class="co">#&gt;       n c         li       </span></a>
<a class="sourceLine" id="cb171-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb171-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;dbl [1]&gt; &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb171-6" data-line-number="6"><span class="co">#&gt; 2     2 &lt;int [2]&gt; &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb171-7" data-line-number="7"><span class="co">#&gt; 3     3 &lt;int [3]&gt; &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb171-8" data-line-number="8"><span class="co">#&gt; 4     4 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">3</span>]] &lt;-<span class="st"> </span>tbl2[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb172-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb172-3" data-line-number="3"><span class="co">#&gt;       n c      li$n $c    $li      </span></a>
<a class="sourceLine" id="cb172-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb172-5" data-line-number="5"><span class="co">#&gt; 1     1 e         1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb172-6" data-line-number="6"><span class="co">#&gt; 2     2 f         2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb172-7" data-line-number="7"><span class="co">#&gt; 3     3 g         3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb172-8" data-line-number="8"><span class="co">#&gt; 4     4 h         4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl2[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb173-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb173-3" data-line-number="3"><span class="co">#&gt;   tb[,1]  [,2]  [,3]  [,4] m[,1]  [,2]</span></a>
<a class="sourceLine" id="cb173-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb173-5" data-line-number="5"><span class="co">#&gt; 1      1     0     0     0     1     0</span></a>
<a class="sourceLine" id="cb173-6" data-line-number="6"><span class="co">#&gt; 2      0     1     0     0     0     1</span></a>
<a class="sourceLine" id="cb173-7" data-line-number="7"><span class="co">#&gt; 3      0     0     1     0     0     0</span></a>
<a class="sourceLine" id="cb173-8" data-line-number="8"><span class="co">#&gt; 4      0     0     0     1     0     0</span></a>
<a class="sourceLine" id="cb173-9" data-line-number="9"><span class="co">#&gt; # … with 2 more variables: [,3] &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb173-10" data-line-number="10"><span class="co">#&gt; #   [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb174-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb174-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li           m</span></a>
<a class="sourceLine" id="cb174-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb174-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     1</span></a>
<a class="sourceLine" id="cb174-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     2</span></a>
<a class="sourceLine" id="cb174-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     3</span></a>
<a class="sourceLine" id="cb174-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>[[&lt;-</code> supports removing a column by assigning <code>NULL</code> to it.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb175-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb175-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb175-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb175-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb175-6" data-line-number="6"><span class="co">#&gt; 2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb175-7" data-line-number="7"><span class="co">#&gt; 3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb175-8" data-line-number="8"><span class="co">#&gt; 4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb176-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb176-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      </span></a>
<a class="sourceLine" id="cb176-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb176-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb176-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb176-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb176-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xname---a-" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xname---a-" class="anchor"></a>Definition of <code>x$name &lt;- a</code>.</h3>
<p><code>x$name &lt;- a</code> and <code>x$"name" &lt;- a</code> are equivalent to <code>x[["name"]] &lt;- a</code>.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span>n &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb177-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb177-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb177-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb177-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb177-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb177-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb177-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span><span class="st">"n"</span> &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb178-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb178-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb178-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb178-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb178-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb178-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb178-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"n"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb179-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb179-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb179-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb179-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb179-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb179-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb179-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> does not implement partial matching but creates a new column.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span>l &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb180-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb180-3" data-line-number="3"><span class="co">#&gt;       n c     li            l</span></a>
<a class="sourceLine" id="cb180-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb180-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     0</span></a>
<a class="sourceLine" id="cb180-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     0</span></a>
<a class="sourceLine" id="cb180-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     0</span></a>
<a class="sourceLine" id="cb180-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"l"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb181-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb181-3" data-line-number="3"><span class="co">#&gt;       n c     li            l</span></a>
<a class="sourceLine" id="cb181-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb181-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     0</span></a>
<a class="sourceLine" id="cb181-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     0</span></a>
<a class="sourceLine" id="cb181-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     0</span></a>
<a class="sourceLine" id="cb181-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     0</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xj---list----" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xj---list----" class="anchor"></a>Definition of <code>x[j] &lt;- list(...)</code>.</h3>
<code>x[j] &lt;- a</code> is equivalent to performing <code>x[[j_1]] &lt;- a[[1]]</code>, <code>x[[j_2]] &lt;- a[[2]]</code> etc. If <code>a</code> contains <code>NULL</code> values, the corresponding columns are removed after updating.
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb182-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb182-3" data-line-number="3"><span class="co">#&gt;   n         c li       </span></a>
<a class="sourceLine" id="cb182-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;int&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb182-5" data-line-number="5"><span class="co">#&gt; 1 x         4 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb182-6" data-line-number="6"><span class="co">#&gt; 2 x         3 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb182-7" data-line-number="7"><span class="co">#&gt; 3 x         2 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb182-8" data-line-number="8"><span class="co">#&gt; 4 x         1 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"li"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>)] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>, <span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb183-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb183-3" data-line-number="3"><span class="co">#&gt;       n li        x</span></a>
<a class="sourceLine" id="cb183-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb183-5" data-line-number="5"><span class="co">#&gt; 1     1 x         4</span></a>
<a class="sourceLine" id="cb183-6" data-line-number="6"><span class="co">#&gt; 2     2 x         3</span></a>
<a class="sourceLine" id="cb183-7" data-line-number="7"><span class="co">#&gt; 3     3 x         2</span></a>
<a class="sourceLine" id="cb183-8" data-line-number="8"><span class="co">#&gt; 4     4 x         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb184-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb184-3" data-line-number="3"><span class="co">#&gt;       c li       </span></a>
<a class="sourceLine" id="cb184-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb184-5" data-line-number="5"><span class="co">#&gt; 1     4 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb184-6" data-line-number="6"><span class="co">#&gt; 2     3 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb184-7" data-line-number="7"><span class="co">#&gt; 3     2 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb184-8" data-line-number="8"><span class="co">#&gt; 4     1 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>NA</code> indexes are not supported.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA, value = list("x")): missing
#&gt; values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_integer_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_integer_, value = list("x")):
#&gt; missing values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_integer_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_character_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_character_, value = list("x")):
#&gt; missing values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_character_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>Just like column updates, <code>[&lt;-</code> supports changing the type of an existing column, also across the principal column types:</p>
<ul>
<li>atomic: <code>df[[1]]</code> and <code>df[[2]]</code>
</li>
<li>list: <code>df[[3]]</code>
</li>
<li>data frame: <code>df2[[1]]</code>
</li>
<li>matrix: <code>df2[[2]]</code>
</li>
</ul>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb197-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb197-3" data-line-number="3"><span class="co">#&gt;   n     c     li       </span></a>
<a class="sourceLine" id="cb197-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb197-5" data-line-number="5"><span class="co">#&gt; 1 e     e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb197-6" data-line-number="6"><span class="co">#&gt; 2 f     f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb197-7" data-line-number="7"><span class="co">#&gt; 3 g     g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb197-8" data-line-number="8"><span class="co">#&gt; 4 h     h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb198-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb198-3" data-line-number="3"><span class="co">#&gt;       n c         li       </span></a>
<a class="sourceLine" id="cb198-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb198-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;dbl [1]&gt; &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb198-6" data-line-number="6"><span class="co">#&gt; 2     2 &lt;int [2]&gt; &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb198-7" data-line-number="7"><span class="co">#&gt; 3     3 &lt;int [3]&gt; &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb198-8" data-line-number="8"><span class="co">#&gt; 4     4 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">3</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb199-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb199-3" data-line-number="3"><span class="co">#&gt;       n c      li$n $c    $li      </span></a>
<a class="sourceLine" id="cb199-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb199-5" data-line-number="5"><span class="co">#&gt; 1     1 e         1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb199-6" data-line-number="6"><span class="co">#&gt; 2     2 f         2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb199-7" data-line-number="7"><span class="co">#&gt; 3     3 g         3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb199-8" data-line-number="8"><span class="co">#&gt; 4     4 h         4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb200-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb200-3" data-line-number="3"><span class="co">#&gt;   tb[,1]  [,2]  [,3]  [,4] m[,1]  [,2]</span></a>
<a class="sourceLine" id="cb200-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb200-5" data-line-number="5"><span class="co">#&gt; 1      1     0     0     0     1     0</span></a>
<a class="sourceLine" id="cb200-6" data-line-number="6"><span class="co">#&gt; 2      0     1     0     0     0     1</span></a>
<a class="sourceLine" id="cb200-7" data-line-number="7"><span class="co">#&gt; 3      0     0     1     0     0     0</span></a>
<a class="sourceLine" id="cb200-8" data-line-number="8"><span class="co">#&gt; 4      0     0     0     1     0     0</span></a>
<a class="sourceLine" id="cb200-9" data-line-number="9"><span class="co">#&gt; # … with 2 more variables: [,3] &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb200-10" data-line-number="10"><span class="co">#&gt; #   [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb201-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb201-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li           m</span></a>
<a class="sourceLine" id="cb201-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb201-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     1</span></a>
<a class="sourceLine" id="cb201-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     2</span></a>
<a class="sourceLine" id="cb201-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     3</span></a>
<a class="sourceLine" id="cb201-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>Appending columns at the end (without gaps) is supported. The name of new columns is determined by the LHS, the RHS, or by name repair (in that order of precedence).</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>)] &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tibble.html">tibble</a></span>(<span class="st">"x"</span>, <span class="dt">x =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb202-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 5</span></a>
<a class="sourceLine" id="cb202-3" data-line-number="3"><span class="co">#&gt;       n c     li        x         y</span></a>
<a class="sourceLine" id="cb202-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb202-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt; x         4</span></a>
<a class="sourceLine" id="cb202-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt; x         3</span></a>
<a class="sourceLine" id="cb202-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt; x         2</span></a>
<a class="sourceLine" id="cb202-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt; x         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">3</span><span class="op">:</span><span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>, <span class="dt">x =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb203-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb203-3" data-line-number="3"><span class="co">#&gt;       n c     li        x</span></a>
<a class="sourceLine" id="cb203-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb203-5" data-line-number="5"><span class="co">#&gt; 1     1 e     x         4</span></a>
<a class="sourceLine" id="cb203-6" data-line-number="6"><span class="co">#&gt; 2     2 f     x         3</span></a>
<a class="sourceLine" id="cb203-7" data-line-number="7"><span class="co">#&gt; 3     3 g     x         2</span></a>
<a class="sourceLine" id="cb203-8" data-line-number="8"><span class="co">#&gt; 4     4 h     x         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb204-2" data-line-number="2"><span class="co">#&gt;   n c         li V4</span></a>
<a class="sourceLine" id="cb204-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9  4</span></a>
<a class="sourceLine" id="cb204-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11  3</span></a>
<a class="sourceLine" id="cb204-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14  2</span></a>
<a class="sourceLine" id="cb204-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text  1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb205-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb205-3" data-line-number="3"><span class="co">#&gt;       n c     li         ...4</span></a>
<a class="sourceLine" id="cb205-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb205-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     4</span></a>
<a class="sourceLine" id="cb205-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     3</span></a>
<a class="sourceLine" id="cb205-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     2</span></a>
<a class="sourceLine" id="cb205-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 5, value = list(4:1)): new columns
#&gt; would leave holes after existing
#&gt; columns</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_at_end_only():
#&gt; could not find function
#&gt; "error_new_columns_at_end_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xj---lista-" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xj---lista-" class="anchor"></a>Definition of <code>x[j] &lt;- list(a)</code>.</h3>
<p><code>x[j] &lt;- a</code> is equivalent to <code>x[j] &lt;- rep_along(j, a)</code> if <code>is_list(a, 1)</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb210-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb210-3" data-line-number="3"><span class="co">#&gt;       n     c li       </span></a>
<a class="sourceLine" id="cb210-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb210-5" data-line-number="5"><span class="co">#&gt; 1     0     0 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb210-6" data-line-number="6"><span class="co">#&gt; 2     0     0 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb210-7" data-line-number="7"><span class="co">#&gt; 3     0     0 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb210-8" data-line-number="8"><span class="co">#&gt; 4     0     0 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb211-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb211-3" data-line-number="3"><span class="co">#&gt;       n     c li       </span></a>
<a class="sourceLine" id="cb211-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb211-5" data-line-number="5"><span class="co">#&gt; 1     0     0 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb211-6" data-line-number="6"><span class="co">#&gt; 2     0     0 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb211-7" data-line-number="7"><span class="co">#&gt; 3     0     0 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb211-8" data-line-number="8"><span class="co">#&gt; 4     0     0 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb212-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb212-3" data-line-number="3"><span class="co">#&gt;       n     c    li</span></a>
<a class="sourceLine" id="cb212-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb212-5" data-line-number="5"><span class="co">#&gt; 1     0     0     0</span></a>
<a class="sourceLine" id="cb212-6" data-line-number="6"><span class="co">#&gt; 2     0     0     0</span></a>
<a class="sourceLine" id="cb212-7" data-line-number="7"><span class="co">#&gt; 3     0     0     0</span></a>
<a class="sourceLine" id="cb212-8" data-line-number="8"><span class="co">#&gt; 4     0     0     0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb213-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb213-3" data-line-number="3"><span class="co">#&gt;       n     c    li</span></a>
<a class="sourceLine" id="cb213-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb213-5" data-line-number="5"><span class="co">#&gt; 1     0     0     0</span></a>
<a class="sourceLine" id="cb213-6" data-line-number="6"><span class="co">#&gt; 2     0     0     0</span></a>
<a class="sourceLine" id="cb213-7" data-line-number="7"><span class="co">#&gt; 3     0     0     0</span></a>
<a class="sourceLine" id="cb213-8" data-line-number="8"><span class="co">#&gt; 4     0     0     0</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>This means that only lists of length one on the RHS are recycled.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 1:2, value = list(0, 0, 0)): provided 3
#&gt; variables to replace 2 variables</code></pre>
</div>
<pre><code>#&gt;   n c         li
#&gt; 1 0 0          9
#&gt; 2 0 0     10, 11
#&gt; 3 0 0 12, 13, 14
#&gt; 4 0 0       text</code></pre>
</td>
<td>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb219-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb219-3" data-line-number="3"><span class="co">#&gt; 1 0 0  0</span></a>
<a class="sourceLine" id="cb219-4" data-line-number="4"><span class="co">#&gt; 2 0 0  0</span></a>
<a class="sourceLine" id="cb219-5" data-line-number="5"><span class="co">#&gt; 3 0 0  0</span></a>
<a class="sourceLine" id="cb219-6" data-line-number="6"><span class="co">#&gt; 4 0 0  0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xj---a--1" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xj---a--1" class="anchor"></a>Definition of <code>x[j] &lt;- a</code>.</h3>
<p><code>x[j] &lt;- a</code> is equivalent to <code>x[j] &lt;- list(a)</code> if <code>is_atomic(a)</code> or <code>is_null(a)</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb222-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb222-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb222-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb222-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb222-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb222-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb222-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb223-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb223-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb223-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb223-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb223-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb223-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb223-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>)))</a>
<a class="sourceLine" id="cb224-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb224-3" data-line-number="3"><span class="co">#&gt;   n         c     li       </span></a>
<a class="sourceLine" id="cb224-4" data-line-number="4"><span class="co">#&gt;   &lt;list&gt;    &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb224-5" data-line-number="5"><span class="co">#&gt; 1 &lt;dbl [1]&gt; e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb224-6" data-line-number="6"><span class="co">#&gt; 2 &lt;dbl [1]&gt; f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb224-7" data-line-number="7"><span class="co">#&gt; 3 &lt;dbl [1]&gt; g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb224-8" data-line-number="8"><span class="co">#&gt; 4 &lt;dbl [1]&gt; h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-x-------" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-x-------" class="anchor"></a>Definition of <code>x[] &lt;- ...</code>.</h3>
<p><code>x[] &lt;- ...</code> is equivalent to <code>x[seq_len(ncol(x))] &lt;- ...</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl)</a>
<a class="sourceLine" id="cb225-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb225-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb225-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb225-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb225-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb225-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb225-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb226-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb226-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb226-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb226-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb226-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb226-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb226-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" data-line-number="1"><span class="kw">with_df</span>(df[] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a>
<a class="sourceLine" id="cb227-2" data-line-number="2"><span class="co">#&gt;   n c     li</span></a>
<a class="sourceLine" id="cb227-3" data-line-number="3"><span class="co">#&gt; 1 1 e      9</span></a>
<a class="sourceLine" id="cb227-4" data-line-number="4"><span class="co">#&gt; 2 2 f 10, 11</span></a>
<a class="sourceLine" id="cb227-5" data-line-number="5"><span class="co">#&gt; 3 1 e      9</span></a>
<a class="sourceLine" id="cb227-6" data-line-number="6"><span class="co">#&gt; 4 2 f 10, 11</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1"><span class="kw">with_df</span>(df[] &lt;-<span class="st"> </span>df2)</a>
<a class="sourceLine" id="cb230-2" data-line-number="2"><span class="co">#&gt;   n.n n.c       n.li c.1 c.2 c.3 c.4</span></a>
<a class="sourceLine" id="cb230-3" data-line-number="3"><span class="co">#&gt; 1   1   e          9   1   0   0   0</span></a>
<a class="sourceLine" id="cb230-4" data-line-number="4"><span class="co">#&gt; 2   2   f     10, 11   0   1   0   0</span></a>
<a class="sourceLine" id="cb230-5" data-line-number="5"><span class="co">#&gt; 3   3   g 12, 13, 14   0   0   1   0</span></a>
<a class="sourceLine" id="cb230-6" data-line-number="6"><span class="co">#&gt; 4   4   h       text   0   0   0   1</span></a>
<a class="sourceLine" id="cb230-7" data-line-number="7"><span class="co">#&gt;   li.n li.c      li.li</span></a>
<a class="sourceLine" id="cb230-8" data-line-number="8"><span class="co">#&gt; 1    1    e          9</span></a>
<a class="sourceLine" id="cb230-9" data-line-number="9"><span class="co">#&gt; 2    2    f     10, 11</span></a>
<a class="sourceLine" id="cb230-10" data-line-number="10"><span class="co">#&gt; 3    3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb230-11" data-line-number="11"><span class="co">#&gt; 4    4    h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl2)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl2)</a>
<a class="sourceLine" id="cb233-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb233-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb233-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb233-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb233-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb233-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb233-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb233-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1"><span class="kw">with_df2</span>(df2[] &lt;-<span class="st"> </span>df2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 1 row,
#&gt; need 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb236-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb236-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb236-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb236-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb236-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb236-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb236-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb236-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="kw">with_df2</span>(df2[] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 2 rows,
#&gt; need 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">with_df2</span>(df2[] &lt;-<span class="st"> </span>df)</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; value = structure(list(n = 1:4, c =
#&gt; c("e", : provided 3 variables to replace
#&gt; 2 variables</code></pre>
</div>
<pre><code>#&gt;   tb m
#&gt; 1  1 e
#&gt; 2  2 f
#&gt; 3  3 g
#&gt; 4  4 h</code></pre>
</td>
<td>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="row-subassignment" class="section level2">
<h2 class="hasAnchor">
<a href="#row-subassignment" class="anchor"></a>Row subassignment</h2>
<div id="definition-of-xi---list----" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi---list----" class="anchor"></a>Definition of <code>x[i, ] &lt;- list(...)</code>.</h3>
<p><code>x[i, ] &lt;- a</code> is the same as <code>vec_slice(x[[j_1]], i) &lt;- a[[1]]</code>, <code>vec_slice(x[[j_2]], i) &lt;- a[[2]]</code>, … .<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb246-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb246-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb246-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb246-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb246-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb246-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb246-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb247-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb247-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb247-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb247-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb247-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb247-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">0</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb248-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb248-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb248-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb248-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb248-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb248-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb248-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">0</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb249-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb249-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb249-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb249-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb249-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb249-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb250-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb250-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb250-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb250-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb250-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb250-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb250-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in seq_len(nrows)[i]: only 0's
#&gt; may be mixed with negative
#&gt; subscripts</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't subset with a mix of
#&gt; negative and positive indices</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_integer_, , value =
#&gt; structure(list(: missing values are
#&gt; not allowed in subscripted
#&gt; assignments of data frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>df2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_integer_, , value =
#&gt; structure(list(: missing values are
#&gt; not allowed in subscripted
#&gt; assignments of data frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">TRUE</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb263-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb263-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb263-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb263-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb263-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb263-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb263-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">FALSE</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb264-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb264-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb264-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb264-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb264-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb264-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb264-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA, , value = structure(list(n = 1L,
#&gt; : missing values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>Only values of size one can be recycled.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" data-line-number="1"></a>
<a class="sourceLine" id="cb269-2" data-line-number="2"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb269-3" data-line-number="3"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(df<span class="op">$</span>n[<span class="dv">1</span>], df<span class="op">$</span>c[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], df<span class="op">$</span>li[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb269-4" data-line-number="4"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl<span class="op">$</span>n[<span class="dv">1</span>], tbl<span class="op">$</span>c[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], tbl<span class="op">$</span>li[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb269-5" data-line-number="5"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a>
<a class="sourceLine" id="cb269-6" data-line-number="6"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: &lt;text&gt;:4:1: unexpected symbol
#&gt; 3: with_df(df[2:3, ] &lt;-
#&gt; list(df$n[1], df$c[1:2], df$li[1])
#&gt; 4: with_tbl
#&gt; ^</code></pre>
</div>
</td>
</tr></tbody></table>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span>df2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:4, , value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 1 row,
#&gt; need 3</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb273-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb273-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb273-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb273-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb273-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb273-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb273-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb273-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span>df2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:4, , value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 2 rows,
#&gt; need 3</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>For compatibility reasons only a warning is issued for indexing beyond the number of rows. Appending rows right at the end of the existing data is supported, without warning.</p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb278-2" data-line-number="2"><span class="co">#&gt; # A tibble: 5 x 3</span></a>
<a class="sourceLine" id="cb278-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb278-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb278-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb278-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb278-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb278-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb278-9" data-line-number="9"><span class="co">#&gt; 5     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb279-2" data-line-number="2"><span class="co">#&gt; # A tibble: 7 x 3</span></a>
<a class="sourceLine" id="cb279-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb279-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb279-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb279-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb279-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb279-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb279-9" data-line-number="9"><span class="co">#&gt; 5     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb279-10" data-line-number="10"><span class="co">#&gt; 6     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb279-11" data-line-number="11"><span class="co">#&gt; 7     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">6</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb280-2" data-line-number="2"><span class="co">#&gt;    n    c         li</span></a>
<a class="sourceLine" id="cb280-3" data-line-number="3"><span class="co">#&gt; 1  1    e          9</span></a>
<a class="sourceLine" id="cb280-4" data-line-number="4"><span class="co">#&gt; 2  2    f     10, 11</span></a>
<a class="sourceLine" id="cb280-5" data-line-number="5"><span class="co">#&gt; 3  3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb280-6" data-line-number="6"><span class="co">#&gt; 4  4    h       text</span></a>
<a class="sourceLine" id="cb280-7" data-line-number="7"><span class="co">#&gt; 5 NA &lt;NA&gt;       NULL</span></a>
<a class="sourceLine" id="cb280-8" data-line-number="8"><span class="co">#&gt; 6  1    e          9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">6</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_rows_at_end_only(): could
#&gt; not find function
#&gt; "error_new_rows_at_end_only"</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span><span class="dv">5</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb283-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb283-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb283-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb283-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb283-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">5</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 4 and you've
#&gt; tried to subset element 5.</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb286-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb286-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb286-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb286-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb286-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb286-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 4 and you've
#&gt; tried to subset element 5.</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span><span class="dv">6</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb289-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb289-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb289-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb289-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb289-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">6</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 4 and you've
#&gt; tried to subset element 6.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>For compatibility, <code>i</code> can also be a character vector containing positive numbers.</p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb292-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb292-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb292-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb292-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb292-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb292-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb292-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb292-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb293-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb293-2" data-line-number="2"><span class="co">#&gt;    n c         li</span></a>
<a class="sourceLine" id="cb293-3" data-line-number="3"><span class="co">#&gt; 1  1 e          9</span></a>
<a class="sourceLine" id="cb293-4" data-line-number="4"><span class="co">#&gt; 2  2 f     10, 11</span></a>
<a class="sourceLine" id="cb293-5" data-line-number="5"><span class="co">#&gt; 3  3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb293-6" data-line-number="6"><span class="co">#&gt; 4  4 h       text</span></a>
<a class="sourceLine" id="cb293-7" data-line-number="7"><span class="co">#&gt; -1 1 e          9</span></a>
<a class="sourceLine" id="cb293-8" data-line-number="8"><span class="co">#&gt; -2 1 e          9</span></a>
<a class="sourceLine" id="cb293-9" data-line-number="9"><span class="co">#&gt; -3 1 e          9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb294-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Only valid row names can be
#&gt; used for indexing. Use `NA` as row index
#&gt; to obtain a row full of `NA` values.</code></pre>
</div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb297-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb297-2" data-line-number="2"><span class="co">#&gt;   n c     li</span></a>
<a class="sourceLine" id="cb297-3" data-line-number="3"><span class="co">#&gt; 1 1 e      9</span></a>
<a class="sourceLine" id="cb297-4" data-line-number="4"><span class="co">#&gt; 2 2 f 10, 11</span></a>
<a class="sourceLine" id="cb297-5" data-line-number="5"><span class="co">#&gt; 3 1 e      9</span></a>
<a class="sourceLine" id="cb297-6" data-line-number="6"><span class="co">#&gt; 4 1 e      9</span></a>
<a class="sourceLine" id="cb297-7" data-line-number="7"><span class="co">#&gt; 5 1 e      9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb298-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Only valid row names can be
#&gt; used for indexing. Use `NA` as row index
#&gt; to obtain a row full of `NA` values.</code></pre>
</div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb301-2" data-line-number="2"><span class="co">#&gt;    n c         li</span></a>
<a class="sourceLine" id="cb301-3" data-line-number="3"><span class="co">#&gt; 1  1 e          9</span></a>
<a class="sourceLine" id="cb301-4" data-line-number="4"><span class="co">#&gt; 2  2 f     10, 11</span></a>
<a class="sourceLine" id="cb301-5" data-line-number="5"><span class="co">#&gt; 3  3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb301-6" data-line-number="6"><span class="co">#&gt; 4  4 h       text</span></a>
<a class="sourceLine" id="cb301-7" data-line-number="7"><span class="co">#&gt; -3 1 e          9</span></a>
<a class="sourceLine" id="cb301-8" data-line-number="8"><span class="co">#&gt; -4 1 e          9</span></a>
<a class="sourceLine" id="cb301-9" data-line-number="9"><span class="co">#&gt; -5 1 e          9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb302-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Only valid row names can be
#&gt; used for indexing. Use `NA` as row index
#&gt; to obtain a row full of `NA` values.</code></pre>
</div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb305-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_character_</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_character_, , value =
#&gt; structure(list(: missing values are
#&gt; not allowed in subscripted
#&gt; assignments of data frames</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb307-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_character_</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_na_new_row(): could
#&gt; not find function "error_na_new_row"</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="row-and-column-subassignment" class="section level2">
<h2 class="hasAnchor">
<a href="#row-and-column-subassignment" class="anchor"></a>Row and column subassignment</h2>
<div id="definition-of-xi-j---a-" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi-j---a-" class="anchor"></a>Definition of <code>x[i, j] &lt;- a</code>.</h3>
<p><code>x[i, j] &lt;- a</code> is equivalent to <code>x[i, ][j] &lt;- a</code>.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<p>Subassignment to <code>x[i, j]</code> is much stricter for tibbles than for data frames. <code>x[i, j] &lt;- a</code> can update only existing columns, it cannot create or remove columns.</p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb309-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb309-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb309-4" data-line-number="4"><span class="co">#&gt; 2 1 f     10, 11</span></a>
<a class="sourceLine" id="cb309-5" data-line-number="5"><span class="co">#&gt; 3 1 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb309-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb310-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb310-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb310-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb310-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb310-6" data-line-number="6"><span class="co">#&gt; 2     1 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb310-7" data-line-number="7"><span class="co">#&gt; 3     1 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb310-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"x"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb311-2" data-line-number="2"><span class="co">#&gt;   n c         li  x</span></a>
<a class="sourceLine" id="cb311-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9 NA</span></a>
<a class="sourceLine" id="cb311-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11  1</span></a>
<a class="sourceLine" id="cb311-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14  1</span></a>
<a class="sourceLine" id="cb311-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text NA</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"x"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index non-existing
#&gt; elements.</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[jj]][iseq] &lt;- vjj:
#&gt; replacement has length zero</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; `value` must be a vector, not NULL</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[i, j] &lt;- a</code> can’t change the data type of existing columns.</p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb318-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a>
<a class="sourceLine" id="cb318-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb318-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb318-4" data-line-number="4"><span class="co">#&gt; 2 e f     10, 11</span></a>
<a class="sourceLine" id="cb318-5" data-line-number="5"><span class="co">#&gt; 3 f g 12, 13, 14</span></a>
<a class="sourceLine" id="cb318-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb319-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value`
#&gt; &lt;character&gt;
#&gt; and `x` &lt;integer&gt;.</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span>])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:3, 2, value = list(9, 10:11)):
#&gt; provided 2 variables to replace 1
#&gt; variables</code></pre>
</div>
<pre><code>#&gt;   n c         li
#&gt; 1 1 e          9
#&gt; 2 2 9     10, 11
#&gt; 3 3 9 12, 13, 14
#&gt; 4 4 h       text</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value` &lt;list&gt;
#&gt; and
#&gt; `x` &lt;character&gt;.</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:3, 3, value = structure(list(n =
#&gt; 1:2, : provided 3 variables to replace 1
#&gt; variables</code></pre>
</div>
<pre><code>#&gt;   n c   li
#&gt; 1 1 e    9
#&gt; 2 2 f    1
#&gt; 3 3 g    2
#&gt; 4 4 h text</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `x` &lt;tbl_df&lt;
#&gt; n : integer
#&gt; c : character
#&gt; li: list
#&gt; &gt;&gt; and `y` &lt;list&gt;.</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in matrix(value, n, p): data
#&gt; length [8] is not a sub-multiple or
#&gt; multiple of the number of columns [3]</code></pre>
</div>
<pre><code>#&gt;   tb.n tb.c tb.li m.1 m.2 m.3 m.4
#&gt; 1    1    e     9   1   0   0   0
#&gt; 2    1    0     0   0   1   0   0
#&gt; 3    0    1     0   0   0   1   0
#&gt; 4    4    h  text   0   0   0   1</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb334-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value`
#&gt; &lt;double[,4]&gt; and `x` &lt;tbl_df&lt;
#&gt; n : integer
#&gt; c : character
#&gt; li: list
#&gt; &gt;&gt;.</code></pre>
</div>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>])</a>
<a class="sourceLine" id="cb336-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb336-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb336-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb336-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb336-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     1     1     1</span></a>
<a class="sourceLine" id="cb336-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     2     2     2</span></a>
<a class="sourceLine" id="cb336-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb336-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>x[i, j] &lt;-</code> can’t append rows.</p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">5</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb337-2" data-line-number="2"><span class="co">#&gt;   n    c         li</span></a>
<a class="sourceLine" id="cb337-3" data-line-number="3"><span class="co">#&gt; 1 1    e          9</span></a>
<a class="sourceLine" id="cb337-4" data-line-number="4"><span class="co">#&gt; 2 2    f     10, 11</span></a>
<a class="sourceLine" id="cb337-5" data-line-number="5"><span class="co">#&gt; 3 3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb337-6" data-line-number="6"><span class="co">#&gt; 4 4    h       text</span></a>
<a class="sourceLine" id="cb337-7" data-line-number="7"><span class="co">#&gt; 5 0 &lt;NA&gt;       NULL</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb338-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 5 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; can
#&gt; be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-xi-j---a--1" class="section level3">
<h3 class="hasAnchor">
<a href="#definition-of-xi-j---a--1" class="anchor"></a>Definition of <code>x[[i, j]] &lt;- a</code>.</h3>
<p><code>i</code> must be a numeric vector of length 1. <code>x[[i, j]] &lt;- a</code> is equivalent to <code>x[i, ][[j]] &lt;- a</code>.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb340-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb340-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb340-3" data-line-number="3"><span class="co">#&gt; 1 0 e          9</span></a>
<a class="sourceLine" id="cb340-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb340-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb340-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb341-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb341-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb341-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb341-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb341-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb341-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb341-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb342-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb342-3" data-line-number="3"><span class="co">#&gt; 1 0 e          9</span></a>
<a class="sourceLine" id="cb342-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb342-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb342-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb343-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb343-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb343-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb343-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb343-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb343-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb343-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>, <span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb344-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb344-3" data-line-number="3"><span class="co">#&gt; 1 1 e       NULL</span></a>
<a class="sourceLine" id="cb344-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb344-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb344-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb345-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb345-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb345-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb345-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb345-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;NULL&gt;   </span></a>
<a class="sourceLine" id="cb345-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb345-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb345-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, ][[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb346-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb346-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb346-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb346-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;NULL&gt;   </span></a>
<a class="sourceLine" id="cb346-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb346-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb346-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; iseq, value = structure(list(n = 1L,
#&gt; : replacement has 1 row, data has 4</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb349-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb349-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb349-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb349-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb349-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb349-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb349-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb349-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb350-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb350-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb350-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb350-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb350-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb350-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb350-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb350-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb351-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[jseq]][[iseq]] &lt;- value:
#&gt; more elements supplied than there
#&gt; are to replace</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb353-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb353-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb353-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     2     3</span></a>
<a class="sourceLine" id="cb353-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb353-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb353-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb353-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>, ][[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a>
<a class="sourceLine" id="cb354-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb354-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb354-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb354-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     2     3</span></a>
<a class="sourceLine" id="cb354-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb354-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb354-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb354-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" data-line-number="1">df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in col[[i, exact = exact]]:
#&gt; attempt to select more than one
#&gt; element in vectorIndex</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" data-line-number="1">tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; 1:2, 1, value = 0): only a single
#&gt; element should be replaced</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>NB: <code><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vctrs::vec_size(a)</a></code> must equal 1. Unlike <code>x[i, ] &lt;-</code>, <code>x[[i, ]] &lt;-</code> is not valid.</p>
<table class="table dftbl"><tbody>
<tr>
<td>
</td>
<td>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/stopifnot.html">stopifnot</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl, <span class="kw">new_tbl</span>()))</a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>NB: <code>x[j][[jj]]</code> is equal to <code>x[[ j[[jj]] ]]</code>, in particular <code>x[j][[1]]</code> is equal to <code>x[[j]]</code> for scalar numeric or integer <code>j</code>.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Row subsetting <code>x[i, ]</code> is not defined in terms of <code>x[[j]][i]</code> because that definition does not generalise to matrix and data frame columns. For efficiency and backward compatibility, <code>i</code> is converted to an integer vector by <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vctrs::vec_as_index(i, nrow(x))</a></code> first.<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p><code>x[,]</code> is equivalent to <code>x[]</code> because <code>x[, j]</code> is equivalent to <code>x[j]</code>.<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>A more efficient implementation of <code>x[i, j]</code> would forward to <code>x[j][i, ]</code>.<a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>Cell subsetting <code>x[[i, j]]</code> is not defined in terms of <code>x[[j]][[i]]</code> because that definition does not generalise to list, matrix and data frame columns. A more efficient implementation of <code>x[[i, j]]</code> would check that <code>j</code> is a scalar and forward to <code>x[i, j][[1]]</code>.<a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p><code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> behaves almost completely symmetrical to <code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code> when comparing subsetting and subassignment.<a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p><code>x[i, ]</code> are symmetrical for subset and subassignment.<a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p><code>x[i, j]</code> is symmetrical for subsetting and subassignment. A more efficient implementation of <code>x[i, j] &lt;- a</code> would forward to <code>x[j][i, ] &lt;- a</code>.<a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p><code>x[[i, j]]</code> is symmetrical for subsetting and subassignment. An efficient implementation would check that <code>i</code> and <code>j</code> are scalar and forward to <code>x[i, j][[1]] &lt;- a</code>.<a href="#fnref9" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#conventions">Conventions</a></li>
      <li><a href="#column-extraction">Column extraction</a></li>
      <li><a href="#column-subsetting">Column subsetting</a></li>
      <li><a href="#row-subsetting">Row subsetting</a></li>
      <li><a href="#row-and-column-subsetting">Row and column subsetting</a></li>
      <li><a href="#column-update">Column update</a></li>
      <li><a href="#row-subassignment">Row subassignment</a></li>
      <li><a href="#row-and-column-subassignment">Row and column subassignment</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="tidyverse">
  <p>tibble is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="http://krlmlr.info">Kirill Müller</a>, <a href="http://hadley.nz">Hadley Wickham</a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '24f802ea87b9d1054ef63db70ff7c836',
    indexName: 'tibble',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
