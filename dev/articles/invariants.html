<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invariants for subsetting and subassignment • tibble</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet">
<!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Invariants for subsetting and subassignment">
<meta property="og:description" content="">
<meta property="og:image" content="https://tibble.tidyverse.org/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tibble</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.99.99.9004</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/tibble.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/extending.html">Extending tibble</a>
    </li>
    <li>
      <a href="../articles/subset.html">Subsetting</a>
    </li>
    <li>
      <a href="../articles/subassign.html">Subassignment</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/03/tibble-2.1.1/">Version 2.1.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/01/tibble-2.0.1/">Version 2.0.1</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/11/tibble-2.0.0-pre-announce/">Version 2.0.0 pre-announcement</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/01/tibble-1-4-2/">Version 1.4.2</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/01/tibble-1-4-1/">Version 1.4.1</a>
    </li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/tibble">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Invariants for subsetting and subassignment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/tibble/blob/master/vignettes/invariants.Rmd"><code>vignettes/invariants.Rmd</code></a></small>
      <div class="hidden name"><code>invariants.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.dftbl {
    width: 100%;
    table-layout: fixed;
    display: inline-table;
}

.error pre code {
    color: red;
}

.warning pre code {
    color: violet;
}
</style>
<p>This vignette defines invariants in the behavior of <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code>, <code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code> and <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code>, and their assignment counterparts <code>$&lt;-</code>, <code>[[&lt;-</code> and <code>[&lt;-</code>, for tibbles, and illustrates where these differ from data frames. The goal is to determine a small set of invariants that consistently define how behaviors interact. For each invariant an example is given. Currently, the <code><a href="../articles/subset.html">vignette("subset")</a></code> and <code><a href="../articles/subassign.html">vignette("subassign")</a></code> articles give a more comprehensive overview, but will be merged into this article at some point.</p>
<p>Some behaviors are defined using functions of the vctrs package, in particular <code><a href="https://rdrr.io/pkg/vctrs/man/vec_slice.html">vec_slice()</a></code>, <code><a href="https://rdrr.io/pkg/vctrs/man/vec_recycle.html">vec_recycle()</a></code> and <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vec_as_index()</a></code>. In this article, all behaviors are demonstrated using one example data frame and its tibble equivalent.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(vctrs)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">new_df &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">n =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  df<span class="op">$</span>c &lt;-<span class="st"> </span>letters[<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>]</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  df<span class="op">$</span>li &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">9</span>, <span class="dv">10</span><span class="op">:</span><span class="dv">11</span>, <span class="dv">12</span><span class="op">:</span><span class="dv">14</span>, <span class="st">"text"</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  df</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">new_tbl &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="kw"><a href="../reference/as_tibble.html">as_tibble</a></span>(<span class="kw">new_df</span>())</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">}</a></code></pre></div>
<p>Results of the same code for data frames and tibbles are presented side by side:</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">new_df</span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">new_tbl</span>()</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>In the following, if the results are identical (after converting to a data frame if necessary), only the tibble result is shown, as in the example below. This makes it easier to spot differences.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">new_tbl</span>()</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>Subsetting operations are read-only. The same objects are reused in all examples:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">new_df</span>()</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">tbl &lt;-<span class="st"> </span><span class="kw">new_tbl</span>()</a></code></pre></div>
<p>Where needed, we also show examples with hierarchical columns containing a data frame or a matrix:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">new_tbl2 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="kw"><a href="../reference/tibble.html">tibble</a></span>(</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">    <span class="dt">tb =</span> tbl,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">    <span class="dt">m =</span> <span class="kw"><a href="https://rdrr.io/r/base/diag.html">diag</a></span>(<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">new_df2 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  df2 &lt;-<span class="st"> </span><span class="kw">new_tbl2</span>()</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  <span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(df2) &lt;-<span class="st"> "data.frame"</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  <span class="kw"><a href="https://rdrr.io/r/base/class.html">class</a></span>(df2<span class="op">$</span>tb) &lt;-<span class="st"> "data.frame"</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  df2</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">df2 &lt;-<span class="st"> </span><span class="kw">new_df2</span>()</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">tbl2 &lt;-<span class="st"> </span><span class="kw">new_tbl2</span>()</a></code></pre></div>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">new_tbl</span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<p>For subset assignment (subassignment, for short), we need a fresh copy of the data for each test. The <code>with_*()</code> functions (omitted here for brevity) allow for a more concise notation. These functions take an assignment expression, execute it on a fresh copy of the data, and return the data for printing. The first example prints what’s really executed, further examples omit this output.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">with_df</span>(df<span class="op">$</span>n &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(df<span class="op">$</span>n), <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;   df &lt;- new_df()</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;   df$n &lt;- rev(df$n)</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;   df</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 1 4 e          9</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt; 2 3 f     10, 11</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt; 3 2 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 4 1 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span>n &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(tbl<span class="op">$</span>n), <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;   tbl &lt;- new_tbl()</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;   tbl$n &lt;- rev(tbl$n)</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;   tbl</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; 1     4 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; 2     3 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; 3     2 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr></tbody></table>
<div id="columns" class="section level1">
<h1 class="hasAnchor">
<a href="#columns" class="anchor"></a>Columns</h1>
<p>The subsetting and subassignment operators for data frames and tibbles are particularly tricky, because they support both row and column indexes, both of which are optionally missing. We resolve this by first defining column-wise subsetting, then row-wise subsetting and the composition of both, then missing indexes.</p>
<div id="definition-of-xj-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xj-" class="anchor"></a>Definition of <code>x[[j]]</code>.</h2>
<p><code>x[[j]]</code> is equivalent to <code><a href="https://rdrr.io/r/base/base-internal.html">.subset2(x, j)</a></code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">tbl[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">tbl[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; [1] 10 11</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; [1] 12 13 14</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; [1] "text"</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; [1] 10 11</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; [1] 12 13 14</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; [1] "text"</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">tbl2[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl2, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">tbl2[[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; [1,]    1    0    0    0</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; [2,]    0    1    0    0</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; [3,]    0    0    1    0</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; [4,]    0    0    0    1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/base-internal.html">.subset2</a></span>(tbl2, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; [1,]    1    0    0    0</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; [2,]    0    1    0    0</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt; [3,]    0    0    1    0</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; [4,]    0    0    0    1</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollary" class="section level3">
<h3 class="hasAnchor">
<a href="#corollary" class="anchor"></a>Corollary</h3>
<p>Accessing <code>NA</code> or missing columns returns <code>NULL</code>. Out-of-bounds indexing throws an error.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">df[[<span class="ot">NA</span>]]</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">tbl[[<span class="ot">NA</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">tbl[[<span class="ot">NA_integer_</span>]]</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">df[[<span class="ot">NA_character_</span>]]</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">tbl[[<span class="ot">NA_character_</span>]]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Unknown or uninitialised
#&gt; column: `NA`.</code></pre>
</div>
<pre><code>#&gt; NULL</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">df[[<span class="st">"x"</span>]]</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">tbl[[<span class="st">"x"</span>]]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Unknown or uninitialised
#&gt; column: `x`.</code></pre>
</div>
<pre><code>#&gt; NULL</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">df[[<span class="dv">4</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): subscript out of bounds</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">tbl[[<span class="dv">4</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 3 and you've
#&gt; tried to subset element 4.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code> requires scalar <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vec_as_index(j)</a></code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">tbl[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Calling `[[` with a vector
#&gt; of length 2 (recursive subsetting)
#&gt; is deprecated and will eventually be
#&gt; converted to an error.</code></pre>
</div>
<pre><code>#&gt; [1] 2</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">df[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): recursive indexing failed at
#&gt; level 2</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">tbl[[<span class="st">"n"</span>]]</a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">df[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): subscript out of bounds</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">tbl[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Calling `[[` with a vector
#&gt; of length 2 (recursive subsetting)
#&gt; is deprecated and will eventually be
#&gt; converted to an error.</code></pre>
</div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, j): subscript
#&gt; out of bounds</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">df[[<span class="ot">TRUE</span>]]</a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">tbl[[<span class="ot">TRUE</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">df[[<span class="ot">FALSE</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in .subset2(x, i, exact =
#&gt; exact): attempt to select less than
#&gt; one element in integerOneIndex</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">tbl[[<span class="ot">FALSE</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[[j]]</code> always returns an object of size <code><a href="https://rdrr.io/r/base/nrow.html">nrow(x)</a></code> if the column exists.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="definition-of-xj---a-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xj---a-" class="anchor"></a>Definition of <code>x[[j]] &lt;- a</code>.</h2>
<p><code>x[[j]] &lt;- a</code> is equivalent to restoring to the original class after assigning the (potentially recycled) value to <code><a href="https://rdrr.io/r/base/class.html">unclass(x)</a></code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">xl &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/class.html">unclass</a></span>(x)</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">xl[[j]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_recycle.html">vec_recycle</a></span>(a, <span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(x))</a>
<a class="sourceLine" id="cb60-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_cast.html">vec_restore</a></span>(xl, x)</a></code></pre></div>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb61-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb61-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb61-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb61-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb62-3" data-line-number="3"><span class="co">#&gt;       n c        li</span></a>
<a class="sourceLine" id="cb62-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb62-5" data-line-number="5"><span class="co">#&gt; 1     1 e         4</span></a>
<a class="sourceLine" id="cb62-6" data-line-number="6"><span class="co">#&gt; 2     2 f         3</span></a>
<a class="sourceLine" id="cb62-7" data-line-number="7"><span class="co">#&gt; 3     3 g         2</span></a>
<a class="sourceLine" id="cb62-8" data-line-number="8"><span class="co">#&gt; 4     4 h         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb63-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb63-3" data-line-number="3"><span class="co">#&gt;      tb m[,1]  [,2]  [,3]  [,4]</span></a>
<a class="sourceLine" id="cb63-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb63-5" data-line-number="5"><span class="co">#&gt; 1     0     1     0     0     0</span></a>
<a class="sourceLine" id="cb63-6" data-line-number="6"><span class="co">#&gt; 2     0     0     1     0     0</span></a>
<a class="sourceLine" id="cb63-7" data-line-number="7"><span class="co">#&gt; 3     0     0     0     1     0</span></a>
<a class="sourceLine" id="cb63-8" data-line-number="8"><span class="co">#&gt; 4     0     0     0     0     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb64-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li           m</span></a>
<a class="sourceLine" id="cb64-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     4</span></a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     3</span></a>
<a class="sourceLine" id="cb64-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     2</span></a>
<a class="sourceLine" id="cb64-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     1</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollary-1" class="section level3">
<h3 class="hasAnchor">
<a href="#corollary-1" class="anchor"></a>Corollary</h3>
<p><code>[[&lt;-</code> requires scalar <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vec_as_index(j)</a></code> (with the exception of new columns, see below).</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb65-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb65-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb65-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb65-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb65-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: more
#&gt; elements supplied than there are to
#&gt; replace</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-`(`*tmp*`, i, value =
#&gt; value): recursive indexing failed at
#&gt; level 2</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"n"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb74-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb74-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb74-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb74-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: more
#&gt; elements supplied than there are to
#&gt; replace</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"n"</span>, <span class="st">"c"</span>)]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">TRUE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3"><span class="co">#&gt; 1 0 e          9</span></a>
<a class="sourceLine" id="cb79-4" data-line-number="4"><span class="co">#&gt; 2 0 f     10, 11</span></a>
<a class="sourceLine" id="cb79-5" data-line-number="5"><span class="co">#&gt; 3 0 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb79-6" data-line-number="6"><span class="co">#&gt; 4 0 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">TRUE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="ot">FALSE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[i]] &lt;- value: attempt to
#&gt; select less than one element in
#&gt; integerOneIndex</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="ot">FALSE</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[[j]] &lt;- a</code> requires <code>vec_size(a) == nrow(x)</code> or <code>vec_size(a) == 1</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb86-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb86-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb86-6" data-line-number="6"><span class="co">#&gt; 2     1 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb86-7" data-line-number="7"><span class="co">#&gt; 3     1 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb86-8" data-line-number="8"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb87-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb87-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb87-5" data-line-number="5"><span class="co">#&gt; 1     4 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb87-6" data-line-number="6"><span class="co">#&gt; 2     3 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb87-7" data-line-number="7"><span class="co">#&gt; 3     2 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb87-8" data-line-number="8"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; 1, value = 3:1): replacement has 3
#&gt; rows, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb92-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb92-3" data-line-number="3"><span class="co">#&gt; 1 2 e          9</span></a>
<a class="sourceLine" id="cb92-4" data-line-number="4"><span class="co">#&gt; 2 1 f     10, 11</span></a>
<a class="sourceLine" id="cb92-5" data-line-number="5"><span class="co">#&gt; 3 2 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb92-6" data-line-number="6"><span class="co">#&gt; 4 1 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>[[&lt;-</code> supports appending a new column at the end.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb95-2" data-line-number="2"><span class="co">#&gt;   n c         li x</span></a>
<a class="sourceLine" id="cb95-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9 0</span></a>
<a class="sourceLine" id="cb95-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11 0</span></a>
<a class="sourceLine" id="cb95-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14 0</span></a>
<a class="sourceLine" id="cb95-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text 0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">4</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb98-2" data-line-number="2"><span class="co">#&gt;   n c         li V4</span></a>
<a class="sourceLine" id="cb98-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9  0</span></a>
<a class="sourceLine" id="cb98-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11  0</span></a>
<a class="sourceLine" id="cb98-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14  0</span></a>
<a class="sourceLine" id="cb98-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text  0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">4</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">5</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in format.data.frame(if (omit)
#&gt; x[seq_len(n0), , drop = FALSE] else
#&gt; x, : corrupt data frame: columns will be
#&gt; truncated or padded with NAs</code></pre>
</div>
<pre><code>#&gt;   n c         li      V5
#&gt; 1 1 e          9 NULL  0
#&gt; 2 2 f     10, 11 &lt;NA&gt;  0
#&gt; 3 3 g 12, 13, 14 &lt;NA&gt;  0
#&gt; 4 4 h       text &lt;NA&gt;  0</code></pre>
</td>
<td>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">5</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_at_end_only():
#&gt; could not find function
#&gt; "error_new_columns_at_end_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>[[&lt;-</code> supports changing the type of an existing column, also across the principal column types:</p>
<ul>
<li>atomic: <code>df[[1]]</code> and <code>df[[2]]</code>
</li>
<li>list: <code>df[[3]]</code>
</li>
<li>data frame: <code>df2[[1]]</code>
</li>
<li>matrix: <code>df2[[2]]</code>
</li>
</ul>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb106-3" data-line-number="3"><span class="co">#&gt;   n     c     li       </span></a>
<a class="sourceLine" id="cb106-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb106-5" data-line-number="5"><span class="co">#&gt; 1 e     e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb106-6" data-line-number="6"><span class="co">#&gt; 2 f     f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb106-7" data-line-number="7"><span class="co">#&gt; 3 g     g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb106-8" data-line-number="8"><span class="co">#&gt; 4 h     h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">2</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb107-3" data-line-number="3"><span class="co">#&gt;       n c         li       </span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb107-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;dbl [1]&gt; &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb107-6" data-line-number="6"><span class="co">#&gt; 2     2 &lt;int [2]&gt; &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb107-7" data-line-number="7"><span class="co">#&gt; 3     3 &lt;int [3]&gt; &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb107-8" data-line-number="8"><span class="co">#&gt; 4     4 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">3</span>]] &lt;-<span class="st"> </span>tbl2[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb108-3" data-line-number="3"><span class="co">#&gt;       n c      li$n $c    $li      </span></a>
<a class="sourceLine" id="cb108-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb108-5" data-line-number="5"><span class="co">#&gt; 1     1 e         1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb108-6" data-line-number="6"><span class="co">#&gt; 2     2 f         2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb108-7" data-line-number="7"><span class="co">#&gt; 3     3 g         3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb108-8" data-line-number="8"><span class="co">#&gt; 4     4 h         4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl2[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="co">#&gt;   tb[,1]  [,2]  [,3]  [,4] m[,1]  [,2]</span></a>
<a class="sourceLine" id="cb109-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb109-5" data-line-number="5"><span class="co">#&gt; 1      1     0     0     0     1     0</span></a>
<a class="sourceLine" id="cb109-6" data-line-number="6"><span class="co">#&gt; 2      0     1     0     0     0     1</span></a>
<a class="sourceLine" id="cb109-7" data-line-number="7"><span class="co">#&gt; 3      0     0     1     0     0     0</span></a>
<a class="sourceLine" id="cb109-8" data-line-number="8"><span class="co">#&gt; 4      0     0     0     1     0     0</span></a>
<a class="sourceLine" id="cb109-9" data-line-number="9"><span class="co">#&gt; # … with 2 more variables: [,3] &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb109-10" data-line-number="10"><span class="co">#&gt; #   [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb110-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li           m</span></a>
<a class="sourceLine" id="cb110-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb110-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     1</span></a>
<a class="sourceLine" id="cb110-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     2</span></a>
<a class="sourceLine" id="cb110-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     3</span></a>
<a class="sourceLine" id="cb110-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>[[&lt;-</code> supports removing a column by assigning <code>NULL</code> to it.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb111-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb111-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb111-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb111-6" data-line-number="6"><span class="co">#&gt; 2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb111-7" data-line-number="7"><span class="co">#&gt; 3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb111-8" data-line-number="8"><span class="co">#&gt; 4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb112-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      </span></a>
<a class="sourceLine" id="cb112-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb112-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb112-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="columns-dont-have-inner-names-" class="section level2">
<h2 class="hasAnchor">
<a href="#columns-dont-have-inner-names-" class="anchor"></a>Columns don’t have inner names.</h2>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">a =</span> <span class="dv">4</span>, <span class="dt">b =</span> <span class="dv">3</span>, <span class="dt">c =</span> <span class="dv">2</span>, <span class="dt">d =</span> <span class="dv">1</span>))[[<span class="st">"x"</span>]]</a>
<a class="sourceLine" id="cb113-2" data-line-number="2"><span class="co">#&gt; [1] 4 3 2 1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">a =</span> <span class="dv">4</span>, <span class="dt">b =</span> <span class="dv">3</span>, <span class="dt">c =</span> <span class="dv">2</span>, <span class="dt">d =</span> <span class="dv">1</span>))[[<span class="st">"x"</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span>rlang<span class="op">::</span><span class="kw"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span>(letters[<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>]))[[<span class="st">"x"</span>]]</a>
<a class="sourceLine" id="cb116-2" data-line-number="2"><span class="co">#&gt; [1] "d" "c" "b" "a"</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span>rlang<span class="op">::</span><span class="kw"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span>(letters[<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>]))[[<span class="st">"x"</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<div id="exception" class="section level3">
<h3 class="hasAnchor">
<a href="#exception" class="anchor"></a>Exception</h3>
<p>List columns can have inner names:</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb119-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">a =</span> <span class="dv">4</span>, <span class="dt">b =</span> <span class="dv">3</span>, <span class="dt">c =</span> <span class="dv">2</span>, <span class="dt">d =</span> <span class="dv">1</span>))[[<span class="st">"x"</span>]]</a>
<a class="sourceLine" id="cb119-2" data-line-number="2"><span class="co">#&gt; $a</span></a>
<a class="sourceLine" id="cb119-3" data-line-number="3"><span class="co">#&gt; [1] 4</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb119-5" data-line-number="5"><span class="co">#&gt; $b</span></a>
<a class="sourceLine" id="cb119-6" data-line-number="6"><span class="co">#&gt; [1] 3</span></a>
<a class="sourceLine" id="cb119-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb119-8" data-line-number="8"><span class="co">#&gt; $c</span></a>
<a class="sourceLine" id="cb119-9" data-line-number="9"><span class="co">#&gt; [1] 2</span></a>
<a class="sourceLine" id="cb119-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb119-11" data-line-number="11"><span class="co">#&gt; $d</span></a>
<a class="sourceLine" id="cb119-12" data-line-number="12"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"x"</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">a =</span> <span class="dv">4</span>, <span class="dt">b =</span> <span class="dv">3</span>, <span class="dt">c =</span> <span class="dv">2</span>, <span class="dt">d =</span> <span class="dv">1</span>))[[<span class="st">"x"</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr></tbody></table>
</div>
</div>
<div id="definition-of-xname-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xname-" class="anchor"></a>Definition of <code>x$name</code>.</h2>
<p><code>x$name</code> is equivalent to <code>x[["name"]]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1">tbl<span class="op">$</span>n</a>
<a class="sourceLine" id="cb122-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1">tbl[[<span class="st">"n"</span>]]</a>
<a class="sourceLine" id="cb123-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1">tbl<span class="op">$</span>li</a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb124-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb124-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb124-6" data-line-number="6"><span class="co">#&gt; [1] 10 11</span></a>
<a class="sourceLine" id="cb124-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb124-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb124-9" data-line-number="9"><span class="co">#&gt; [1] 12 13 14</span></a>
<a class="sourceLine" id="cb124-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb124-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb124-12" data-line-number="12"><span class="co">#&gt; [1] "text"</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1">tbl[[<span class="st">"li"</span>]]</a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb125-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb125-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb125-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb125-6" data-line-number="6"><span class="co">#&gt; [1] 10 11</span></a>
<a class="sourceLine" id="cb125-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb125-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb125-9" data-line-number="9"><span class="co">#&gt; [1] 12 13 14</span></a>
<a class="sourceLine" id="cb125-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb125-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb125-12" data-line-number="12"><span class="co">#&gt; [1] "text"</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span>n &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb126-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb126-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb126-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb126-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb126-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb126-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb126-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"n"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb127-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb127-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb127-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb127-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb127-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb127-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1">tbl2<span class="op">$</span>tb</a>
<a class="sourceLine" id="cb128-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb128-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb128-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb128-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb128-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb128-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb128-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1">tbl2[[<span class="st">"tb"</span>]]</a>
<a class="sourceLine" id="cb129-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb129-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb129-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb129-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb129-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb129-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb129-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1">tbl2<span class="op">$</span>m</a>
<a class="sourceLine" id="cb130-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb130-3" data-line-number="3"><span class="co">#&gt; [1,]    1    0    0    0</span></a>
<a class="sourceLine" id="cb130-4" data-line-number="4"><span class="co">#&gt; [2,]    0    1    0    0</span></a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="co">#&gt; [3,]    0    0    1    0</span></a>
<a class="sourceLine" id="cb130-6" data-line-number="6"><span class="co">#&gt; [4,]    0    0    0    1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1">tbl2[[<span class="st">"m"</span>]]</a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb131-3" data-line-number="3"><span class="co">#&gt; [1,]    1    0    0    0</span></a>
<a class="sourceLine" id="cb131-4" data-line-number="4"><span class="co">#&gt; [2,]    0    1    0    0</span></a>
<a class="sourceLine" id="cb131-5" data-line-number="5"><span class="co">#&gt; [3,]    0    0    1    0</span></a>
<a class="sourceLine" id="cb131-6" data-line-number="6"><span class="co">#&gt; [4,]    0    0    0    1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="kw">with_df2</span>(df2<span class="op">$</span>df &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `$&lt;-.data.frame`(`*tmp*`,
#&gt; df, value = structure(list(n = 1L, :
#&gt; replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2<span class="op">$</span>tbl &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb134-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb134-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb134-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb134-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb134-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb134-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb134-9" data-line-number="9"><span class="co">#&gt; # … with 4 more variables: [,4] &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb134-10" data-line-number="10"><span class="co">#&gt; #   tbl$n &lt;int&gt;, $c &lt;chr&gt;, $li &lt;list&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="st">"df"</span>]] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; "df", value = structure(list(n = 1L,
#&gt; : replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="st">"tbl"</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" data-line-number="1"><span class="kw">with_df2</span>(df2<span class="op">$</span>m &lt;-<span class="st"> </span>df2<span class="op">$</span>m[<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `$&lt;-.data.frame`(`*tmp*`,
#&gt; m, value = structure(c(1, 0, 0, 0),
#&gt; .Dim = c(1L, : replacement has 1
#&gt; row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2<span class="op">$</span>m &lt;-<span class="st"> </span>tbl2<span class="op">$</span>m[<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a>
<a class="sourceLine" id="cb141-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb141-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb141-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb141-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb141-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     1     0     0</span></a>
<a class="sourceLine" id="cb141-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     1     0     0</span></a>
<a class="sourceLine" id="cb141-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     1     0     0</span></a>
<a class="sourceLine" id="cb141-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="st">"m"</span>]] &lt;-<span class="st"> </span>df2[[<span class="st">"m"</span>]][<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; "m", value = structure(c(1, 0, 0, :
#&gt; replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="st">"m"</span>]] &lt;-<span class="st"> </span>tbl2[[<span class="st">"m"</span>]][<span class="dv">1</span>, , <span class="dt">drop =</span> <span class="ot">FALSE</span>])</a>
<a class="sourceLine" id="cb144-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb144-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb144-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb144-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb144-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     1     0     0</span></a>
<a class="sourceLine" id="cb144-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     1     0     0</span></a>
<a class="sourceLine" id="cb144-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     1     0     0</span></a>
<a class="sourceLine" id="cb144-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollary-2" class="section level3">
<h3 class="hasAnchor">
<a href="#corollary-2" class="anchor"></a>Corollary</h3>
<p><code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> does not implement partial matching. For compatibility with code that probes columns and compares with <code>NULL</code>, only a warning is raised.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" data-line-number="1">df<span class="op">$</span>l</a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="co">#&gt; [1] 10 11</span></a>
<a class="sourceLine" id="cb145-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb145-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb145-9" data-line-number="9"><span class="co">#&gt; [1] 12 13 14</span></a>
<a class="sourceLine" id="cb145-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb145-11" data-line-number="11"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb145-12" data-line-number="12"><span class="co">#&gt; [1] "text"</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1">tbl<span class="op">$</span>l</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Unknown or uninitialised
#&gt; column: `l`.</code></pre>
</div>
<pre><code>#&gt; NULL</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1">df[[<span class="st">"l"</span>]]</a>
<a class="sourceLine" id="cb149-2" data-line-number="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1">tbl[[<span class="st">"l"</span>]]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Unknown or uninitialised
#&gt; column: `l`.</code></pre>
</div>
<pre><code>#&gt; NULL</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl<span class="op">$</span>l &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb153-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb153-3" data-line-number="3"><span class="co">#&gt;       n c     li            l</span></a>
<a class="sourceLine" id="cb153-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb153-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     0</span></a>
<a class="sourceLine" id="cb153-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     0</span></a>
<a class="sourceLine" id="cb153-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     0</span></a>
<a class="sourceLine" id="cb153-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="st">"l"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb154-2" data-line-number="2"><span class="co">#&gt;   n c         li l</span></a>
<a class="sourceLine" id="cb154-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9 0</span></a>
<a class="sourceLine" id="cb154-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11 0</span></a>
<a class="sourceLine" id="cb154-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14 0</span></a>
<a class="sourceLine" id="cb154-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text 0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="st">"l"</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="definition-of-xj--1" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xj--1" class="anchor"></a>Definition of <code>x[j]</code>.</h2>
<p>Equivalent to restoring <code><a href="https://rdrr.io/r/base/base-internal.html">.subset(x, vec_as_index(j))</a></code> to the original class.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1">tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb157-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb157-3" data-line-number="3"><span class="co">#&gt;       n c    </span></a>
<a class="sourceLine" id="cb157-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb157-5" data-line-number="5"><span class="co">#&gt; 1     1 e    </span></a>
<a class="sourceLine" id="cb157-6" data-line-number="6"><span class="co">#&gt; 2     2 f    </span></a>
<a class="sourceLine" id="cb157-7" data-line-number="7"><span class="co">#&gt; 3     3 g    </span></a>
<a class="sourceLine" id="cb157-8" data-line-number="8"><span class="co">#&gt; 4     4 h</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1">tbl[<span class="dv">0</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb158-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb158-3" data-line-number="3"><span class="co">#&gt;       n c    </span></a>
<a class="sourceLine" id="cb158-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb158-5" data-line-number="5"><span class="co">#&gt; 1     1 e    </span></a>
<a class="sourceLine" id="cb158-6" data-line-number="6"><span class="co">#&gt; 2     2 f    </span></a>
<a class="sourceLine" id="cb158-7" data-line-number="7"><span class="co">#&gt; 3     3 g    </span></a>
<a class="sourceLine" id="cb158-8" data-line-number="8"><span class="co">#&gt; 4     4 h</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb159-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb159-3" data-line-number="3"><span class="co">#&gt;       n li       </span></a>
<a class="sourceLine" id="cb159-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb159-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb159-6" data-line-number="6"><span class="co">#&gt; 2     2 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb159-7" data-line-number="7"><span class="co">#&gt; 3     3 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb159-8" data-line-number="8"><span class="co">#&gt; 4     4 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1">df[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[.default`(df, -1:2): only
#&gt; 0's may be mixed with negative
#&gt; subscripts</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't subset with a mix of
#&gt; negative and positive indices</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1">tbl[<span class="st">"c"</span>]</a>
<a class="sourceLine" id="cb164-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb164-3" data-line-number="3"><span class="co">#&gt;   c    </span></a>
<a class="sourceLine" id="cb164-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb164-5" data-line-number="5"><span class="co">#&gt; 1 e    </span></a>
<a class="sourceLine" id="cb164-6" data-line-number="6"><span class="co">#&gt; 2 f    </span></a>
<a class="sourceLine" id="cb164-7" data-line-number="7"><span class="co">#&gt; 3 g    </span></a>
<a class="sourceLine" id="cb164-8" data-line-number="8"><span class="co">#&gt; 4 h</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]</a>
<a class="sourceLine" id="cb165-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb165-3" data-line-number="3"><span class="co">#&gt;       n li       </span></a>
<a class="sourceLine" id="cb165-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb165-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb165-6" data-line-number="6"><span class="co">#&gt; 2     2 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb165-7" data-line-number="7"><span class="co">#&gt; 3     3 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb165-8" data-line-number="8"><span class="co">#&gt; 4     4 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1">tbl[<span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb166-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb166-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb166-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb166-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb166-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb166-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb166-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollaries" class="section level3">
<h3 class="hasAnchor">
<a href="#corollaries" class="anchor"></a>Corollaries</h3>
<p><code>NA</code> columns are not supported.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1">df[<span class="ot">NA</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[.data.frame`(df, NA):
#&gt; undefined columns selected</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1">tbl[<span class="ot">NA</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Can't use numeric NA as column index
#&gt; with `[` at positions 1, 2, 3.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1">df[<span class="ot">NA_integer_</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[.data.frame`(df,
#&gt; NA_integer_): undefined columns
#&gt; selected</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1">tbl[<span class="ot">NA_integer_</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Can't use numeric NA as column index
#&gt; with `[` at position 1.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1">df[<span class="ot">NA_character_</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[.data.frame`(df,
#&gt; NA_character_): undefined columns
#&gt; selected</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1">tbl[<span class="ot">NA_character_</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Can't use numeric NA as column index
#&gt; with `[` at position 1.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>Out-of-bounds indexing (and recycling of logical vectors of size &gt; 1) is not supported.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1">df[<span class="dv">4</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[.data.frame`(df, 4):
#&gt; undefined columns selected</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">tbl[<span class="dv">4</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 3 and you've
#&gt; tried to subset element 4.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1">df[<span class="op">-</span><span class="dv">4</span>]</a>
<a class="sourceLine" id="cb183-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb183-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb183-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb183-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb183-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">4</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 3 and you've
#&gt; tried to subset element 4.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1">df[<span class="st">"x"</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[.data.frame`(df, "x"):
#&gt; undefined columns selected</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1">tbl[<span class="st">"x"</span>]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index non-existing
#&gt; elements.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb190-2" data-line-number="2"><span class="co">#&gt;   n         li</span></a>
<a class="sourceLine" id="cb190-3" data-line-number="3"><span class="co">#&gt; 1 1          9</span></a>
<a class="sourceLine" id="cb190-4" data-line-number="4"><span class="co">#&gt; 2 2     10, 11</span></a>
<a class="sourceLine" id="cb190-5" data-line-number="5"><span class="co">#&gt; 3 3 12, 13, 14</span></a>
<a class="sourceLine" id="cb190-6" data-line-number="6"><span class="co">#&gt; 4 4       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Logical indices must have
#&gt; length 1 or be as long as the
#&gt; indexed vector.
#&gt; The vector has size 3 whereas the
#&gt; index has size 4.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a>
<a class="sourceLine" id="cb193-2" data-line-number="2"><span class="co">#&gt;   n         li</span></a>
<a class="sourceLine" id="cb193-3" data-line-number="3"><span class="co">#&gt; 1 1          9</span></a>
<a class="sourceLine" id="cb193-4" data-line-number="4"><span class="co">#&gt; 2 2     10, 11</span></a>
<a class="sourceLine" id="cb193-5" data-line-number="5"><span class="co">#&gt; 3 3 12, 13, 14</span></a>
<a class="sourceLine" id="cb193-6" data-line-number="6"><span class="co">#&gt; 4 4       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Logical indices must have
#&gt; length 1 or be as long as the
#&gt; indexed vector.
#&gt; The vector has size 3 whereas the
#&gt; index has size 2.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[j]</code> retains the number of rows in the input.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(tbl[])</a>
<a class="sourceLine" id="cb196-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(tbl[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb197-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(tbl[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb198-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(tbl2[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb199-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(tbl2[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb200-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="definition-of-xj---list----" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xj---list----" class="anchor"></a>Definition of <code>x[j] &lt;- list(...)</code>.</h2>
<p><code>x[j] &lt;- a</code> is equivalent to converting <code>j</code> to column indexes or column names and performing <code>x[[jj]] &lt;- ...</code> in a loop.</p>
<p>For converting indexes, the following (internal) function is used.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1"><span class="co"># With logic for defining names of new columns, see below</span></a>
<a class="sourceLine" id="cb201-2" data-line-number="2">j &lt;-<span class="st"> </span><span class="kw">vec_as_new_col_index</span>(j, x, a)</a></code></pre></div>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1"><span class="co"># Existing columns indexes</span></a>
<a class="sourceLine" id="cb202-2" data-line-number="2">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb202-3" data-line-number="3"><span class="co">#&gt;     </span></a>
<a class="sourceLine" id="cb202-4" data-line-number="4"><span class="co">#&gt; 2 3</span></a>
<a class="sourceLine" id="cb202-5" data-line-number="5">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="op">-</span><span class="dv">3</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb202-6" data-line-number="6"><span class="co">#&gt;     </span></a>
<a class="sourceLine" id="cb202-7" data-line-number="7"><span class="co">#&gt; 1 2</span></a>
<a class="sourceLine" id="cb202-8" data-line-number="8">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb202-9" data-line-number="9"><span class="co">#&gt; [1] 1 3</span></a>
<a class="sourceLine" id="cb202-10" data-line-number="10"><span class="co"># New columns</span></a>
<a class="sourceLine" id="cb202-11" data-line-number="11">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="st">"x"</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">y =</span> <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb202-12" data-line-number="12"><span class="co">#&gt;  x </span></a>
<a class="sourceLine" id="cb202-13" data-line-number="13"><span class="co">#&gt; NA</span></a>
<a class="sourceLine" id="cb202-14" data-line-number="14">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="dv">4</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">y =</span> <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb202-15" data-line-number="15"><span class="co">#&gt;  y </span></a>
<a class="sourceLine" id="cb202-16" data-line-number="16"><span class="co">#&gt; NA</span></a>
<a class="sourceLine" id="cb202-17" data-line-number="17">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="dv">4</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb202-18" data-line-number="18"><span class="co">#&gt; ...4 </span></a>
<a class="sourceLine" id="cb202-19" data-line-number="19"><span class="co">#&gt;   NA</span></a>
<a class="sourceLine" id="cb202-20" data-line-number="20"><span class="co"># Errors</span></a>
<a class="sourceLine" id="cb202-21" data-line-number="21">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="ot">NA</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_new_columns_non_na_only(): could not find function "error_new_columns_non_na_only"</code></pre>
</div>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="ot">NA_integer_</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_new_columns_non_na_only(): could not find function "error_new_columns_non_na_only"</code></pre>
</div>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="ot">NA_character_</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_new_columns_non_na_only(): could not find function "error_new_columns_non_na_only"</code></pre>
</div>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1">tibble<span class="op">:::</span><span class="kw">vec_as_new_col_index</span>(<span class="dv">5</span>, df, <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_new_columns_at_end_only(): could not find function "error_new_columns_at_end_only"</code></pre>
</div>
<p>For accessing the name or index of a target column, the following helper is used:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1">index_or_name &lt;-<span class="st"> </span><span class="cf">function</span>(j, ja) {</a>
<a class="sourceLine" id="cb210-2" data-line-number="2">  index &lt;-<span class="st"> </span>j[[ja]]</a>
<a class="sourceLine" id="cb210-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(index)) index <span class="cf">else</span> <span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(j)[[ja]]</a>
<a class="sourceLine" id="cb210-4" data-line-number="4">}</a></code></pre></div>
<p>Below is a simple version of the update loop:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1"><span class="co"># Create, update or remove, indexed by position</span></a>
<a class="sourceLine" id="cb211-2" data-line-number="2"><span class="cf">for</span> (ja <span class="cf">in</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span>(j)) {</a>
<a class="sourceLine" id="cb211-3" data-line-number="3">  jx &lt;-<span class="st"> </span><span class="kw">index_or_name</span>(j, ja)</a>
<a class="sourceLine" id="cb211-4" data-line-number="4">  x[[jx]] &lt;-<span class="st"> </span>a[[ja]] <span class="co"># with implicit recycling</span></a>
<a class="sourceLine" id="cb211-5" data-line-number="5">}</a></code></pre></div>
<p>Adding, updating and removing columns may occur in arbitrary order. A robust implementation that avoids index mismatches might look more like this:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1">a_null &lt;-<span class="st"> </span><span class="kw">map_lgl</span>(a, is_null)</a>
<a class="sourceLine" id="cb212-2" data-line-number="2"></a>
<a class="sourceLine" id="cb212-3" data-line-number="3"><span class="co"># Create or update, indexed by position</span></a>
<a class="sourceLine" id="cb212-4" data-line-number="4"><span class="cf">for</span> (ja <span class="cf">in</span> <span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="op">!</span>a_null)) {</a>
<a class="sourceLine" id="cb212-5" data-line-number="5">  jx &lt;-<span class="st"> </span><span class="kw">index_or_name</span>(j, ja)</a>
<a class="sourceLine" id="cb212-6" data-line-number="6">  x[[jx]] &lt;-<span class="st"> </span>a[[ja]] <span class="co"># with implicit recycling</span></a>
<a class="sourceLine" id="cb212-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb212-8" data-line-number="8"></a>
<a class="sourceLine" id="cb212-9" data-line-number="9"><span class="co"># Remove</span></a>
<a class="sourceLine" id="cb212-10" data-line-number="10">j_remove &lt;-<span class="st"> </span>j[a_null]</a>
<a class="sourceLine" id="cb212-11" data-line-number="11"><span class="cf">if</span> (<span class="kw">has_length</span>(j_remove)) x &lt;-<span class="st"> </span>x[<span class="op">-</span>j_remove]</a></code></pre></div>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb213-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb213-3" data-line-number="3"><span class="co">#&gt;   n         c li       </span></a>
<a class="sourceLine" id="cb213-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;int&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb213-5" data-line-number="5"><span class="co">#&gt; 1 x         4 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb213-6" data-line-number="6"><span class="co">#&gt; 2 x         3 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb213-7" data-line-number="7"><span class="co">#&gt; 3 x         2 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb213-8" data-line-number="8"><span class="co">#&gt; 4 x         1 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"li"</span>, <span class="st">"x"</span>, <span class="st">"c"</span>)] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>, <span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb214-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb214-3" data-line-number="3"><span class="co">#&gt;       n li        x</span></a>
<a class="sourceLine" id="cb214-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb214-5" data-line-number="5"><span class="co">#&gt; 1     1 x         4</span></a>
<a class="sourceLine" id="cb214-6" data-line-number="6"><span class="co">#&gt; 2     2 x         3</span></a>
<a class="sourceLine" id="cb214-7" data-line-number="7"><span class="co">#&gt; 3     3 x         2</span></a>
<a class="sourceLine" id="cb214-8" data-line-number="8"><span class="co">#&gt; 4     4 x         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb215-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb215-3" data-line-number="3"><span class="co">#&gt;       c li       </span></a>
<a class="sourceLine" id="cb215-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb215-5" data-line-number="5"><span class="co">#&gt; 1     4 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb215-6" data-line-number="6"><span class="co">#&gt; 2     3 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb215-7" data-line-number="7"><span class="co">#&gt; 3     2 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb215-8" data-line-number="8"><span class="co">#&gt; 4     1 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollaries-1" class="section level3">
<h3 class="hasAnchor">
<a href="#corollaries-1" class="anchor"></a>Corollaries</h3>
<p><code>NA</code> indexes are not supported.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA, value = list("x")): missing
#&gt; values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_integer_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_integer_, value = list("x")):
#&gt; missing values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_integer_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_character_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_character_, value = list("x")):
#&gt; missing values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_character_</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_non_na_only():
#&gt; could not find function
#&gt; "error_new_columns_non_na_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>[&lt;-</code> supports changing the type of an existing column, also across the principal column types:</p>
<ul>
<li>atomic: <code>df[[1]]</code> and <code>df[[2]]</code>
</li>
<li>list: <code>df[[3]]</code>
</li>
<li>data frame: <code>df2[[1]]</code>
</li>
<li>matrix: <code>df2[[2]]</code>
</li>
</ul>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb228-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb228-3" data-line-number="3"><span class="co">#&gt;   n     c     li       </span></a>
<a class="sourceLine" id="cb228-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb228-5" data-line-number="5"><span class="co">#&gt; 1 e     e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb228-6" data-line-number="6"><span class="co">#&gt; 2 f     f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb228-7" data-line-number="7"><span class="co">#&gt; 3 g     g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb228-8" data-line-number="8"><span class="co">#&gt; 4 h     h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb229-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb229-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb229-3" data-line-number="3"><span class="co">#&gt;       n c         li       </span></a>
<a class="sourceLine" id="cb229-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb229-5" data-line-number="5"><span class="co">#&gt; 1     1 &lt;dbl [1]&gt; &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb229-6" data-line-number="6"><span class="co">#&gt; 2     2 &lt;int [2]&gt; &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb229-7" data-line-number="7"><span class="co">#&gt; 3     3 &lt;int [3]&gt; &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb229-8" data-line-number="8"><span class="co">#&gt; 4     4 &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">3</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb230-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb230-3" data-line-number="3"><span class="co">#&gt;       n c      li$n $c    $li      </span></a>
<a class="sourceLine" id="cb230-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb230-5" data-line-number="5"><span class="co">#&gt; 1     1 e         1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb230-6" data-line-number="6"><span class="co">#&gt; 2     2 f         2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb230-7" data-line-number="7"><span class="co">#&gt; 3     3 g         3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb230-8" data-line-number="8"><span class="co">#&gt; 4     4 h         4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb231-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb231-3" data-line-number="3"><span class="co">#&gt;   tb[,1]  [,2]  [,3]  [,4] m[,1]  [,2]</span></a>
<a class="sourceLine" id="cb231-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb231-5" data-line-number="5"><span class="co">#&gt; 1      1     0     0     0     1     0</span></a>
<a class="sourceLine" id="cb231-6" data-line-number="6"><span class="co">#&gt; 2      0     1     0     0     0     1</span></a>
<a class="sourceLine" id="cb231-7" data-line-number="7"><span class="co">#&gt; 3      0     0     1     0     0     0</span></a>
<a class="sourceLine" id="cb231-8" data-line-number="8"><span class="co">#&gt; 4      0     0     0     1     0     0</span></a>
<a class="sourceLine" id="cb231-9" data-line-number="9"><span class="co">#&gt; # … with 2 more variables: [,3] &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb231-10" data-line-number="10"><span class="co">#&gt; #   [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb232-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb232-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li           m</span></a>
<a class="sourceLine" id="cb232-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb232-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     1</span></a>
<a class="sourceLine" id="cb232-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     2</span></a>
<a class="sourceLine" id="cb232-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     3</span></a>
<a class="sourceLine" id="cb232-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     4</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p>Appending columns at the end (without gaps) is supported. The name of new columns is determined by the LHS, the RHS, or by name repair (in that order of precedence).</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>)] &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tibble.html">tibble</a></span>(<span class="st">"x"</span>, <span class="dt">x =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb233-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 5</span></a>
<a class="sourceLine" id="cb233-3" data-line-number="3"><span class="co">#&gt;       n c     li        x         y</span></a>
<a class="sourceLine" id="cb233-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb233-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt; x         4</span></a>
<a class="sourceLine" id="cb233-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt; x         3</span></a>
<a class="sourceLine" id="cb233-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt; x         2</span></a>
<a class="sourceLine" id="cb233-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt; x         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">3</span><span class="op">:</span><span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>, <span class="dt">x =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb234-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb234-3" data-line-number="3"><span class="co">#&gt;       n c     li        x</span></a>
<a class="sourceLine" id="cb234-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb234-5" data-line-number="5"><span class="co">#&gt; 1     1 e     x         4</span></a>
<a class="sourceLine" id="cb234-6" data-line-number="6"><span class="co">#&gt; 2     2 f     x         3</span></a>
<a class="sourceLine" id="cb234-7" data-line-number="7"><span class="co">#&gt; 3     3 g     x         2</span></a>
<a class="sourceLine" id="cb234-8" data-line-number="8"><span class="co">#&gt; 4     4 h     x         1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb235-2" data-line-number="2"><span class="co">#&gt;   n c         li V4</span></a>
<a class="sourceLine" id="cb235-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9  4</span></a>
<a class="sourceLine" id="cb235-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11  3</span></a>
<a class="sourceLine" id="cb235-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14  2</span></a>
<a class="sourceLine" id="cb235-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text  1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb236-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb236-3" data-line-number="3"><span class="co">#&gt;       n c     li         ...4</span></a>
<a class="sourceLine" id="cb236-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb236-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;     4</span></a>
<a class="sourceLine" id="cb236-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;     3</span></a>
<a class="sourceLine" id="cb236-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;     2</span></a>
<a class="sourceLine" id="cb236-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 5, value = list(4:1)): new columns
#&gt; would leave holes after existing
#&gt; columns</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_columns_at_end_only():
#&gt; could not find function
#&gt; "error_new_columns_at_end_only"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[j]</code> and <code>x[[j]]</code> can be used interchangeably on the LHS or RHS of an assignment:</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb241-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb241-3" data-line-number="3"><span class="co">#&gt;   n         c     li       </span></a>
<a class="sourceLine" id="cb241-4" data-line-number="4"><span class="co">#&gt;   &lt;list&gt;    &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb241-5" data-line-number="5"><span class="co">#&gt; 1 &lt;dbl [1]&gt; e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb241-6" data-line-number="6"><span class="co">#&gt; 2 &lt;int [2]&gt; f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb241-7" data-line-number="7"><span class="co">#&gt; 3 &lt;int [3]&gt; g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb241-8" data-line-number="8"><span class="co">#&gt; 4 &lt;chr [1]&gt; h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[[<span class="dv">3</span>]]))</a>
<a class="sourceLine" id="cb242-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb242-3" data-line-number="3"><span class="co">#&gt;   n         c     li       </span></a>
<a class="sourceLine" id="cb242-4" data-line-number="4"><span class="co">#&gt;   &lt;list&gt;    &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb242-5" data-line-number="5"><span class="co">#&gt; 1 &lt;dbl [1]&gt; e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb242-6" data-line-number="6"><span class="co">#&gt; 2 &lt;int [2]&gt; f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb242-7" data-line-number="7"><span class="co">#&gt; 3 &lt;int [3]&gt; g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb242-8" data-line-number="8"><span class="co">#&gt; 4 &lt;chr [1]&gt; h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">3</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb243-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb243-3" data-line-number="3"><span class="co">#&gt;       n c        li</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb243-5" data-line-number="5"><span class="co">#&gt; 1     1 e         1</span></a>
<a class="sourceLine" id="cb243-6" data-line-number="6"><span class="co">#&gt; 2     2 f         2</span></a>
<a class="sourceLine" id="cb243-7" data-line-number="7"><span class="co">#&gt; 3     3 g         3</span></a>
<a class="sourceLine" id="cb243-8" data-line-number="8"><span class="co">#&gt; 4     4 h         4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[[<span class="dv">1</span>]]))</a>
<a class="sourceLine" id="cb244-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb244-3" data-line-number="3"><span class="co">#&gt;       n c        li</span></a>
<a class="sourceLine" id="cb244-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb244-5" data-line-number="5"><span class="co">#&gt; 1     1 e         1</span></a>
<a class="sourceLine" id="cb244-6" data-line-number="6"><span class="co">#&gt; 2     2 f         2</span></a>
<a class="sourceLine" id="cb244-7" data-line-number="7"><span class="co">#&gt; 3     3 g         3</span></a>
<a class="sourceLine" id="cb244-8" data-line-number="8"><span class="co">#&gt; 4     4 h         4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb245-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb245-3" data-line-number="3"><span class="co">#&gt;      tb m[,1]  [,2]  [,3]  [,4]</span></a>
<a class="sourceLine" id="cb245-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb245-5" data-line-number="5"><span class="co">#&gt; 1     1     1     0     0     0</span></a>
<a class="sourceLine" id="cb245-6" data-line-number="6"><span class="co">#&gt; 2     2     0     1     0     0</span></a>
<a class="sourceLine" id="cb245-7" data-line-number="7"><span class="co">#&gt; 3     3     0     0     1     0</span></a>
<a class="sourceLine" id="cb245-8" data-line-number="8"><span class="co">#&gt; 4     4     0     0     0     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[[<span class="dv">1</span>]]))</a>
<a class="sourceLine" id="cb246-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb246-3" data-line-number="3"><span class="co">#&gt;      tb m[,1]  [,2]  [,3]  [,4]</span></a>
<a class="sourceLine" id="cb246-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb246-5" data-line-number="5"><span class="co">#&gt; 1     1     1     0     0     0</span></a>
<a class="sourceLine" id="cb246-6" data-line-number="6"><span class="co">#&gt; 2     2     0     1     0     0</span></a>
<a class="sourceLine" id="cb246-7" data-line-number="7"><span class="co">#&gt; 3     3     0     0     1     0</span></a>
<a class="sourceLine" id="cb246-8" data-line-number="8"><span class="co">#&gt; 4     4     0     0     0     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">2</span>]] &lt;-<span class="st"> </span>tbl[[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb247-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li       m        </span></a>
<a class="sourceLine" id="cb247-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb247-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt; &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb247-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt; &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb247-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt; &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb247-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[[<span class="dv">3</span>]]))</a>
<a class="sourceLine" id="cb248-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb248-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li       m        </span></a>
<a class="sourceLine" id="cb248-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;    &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb248-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt; &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb248-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt; &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb248-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt; &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb248-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt; &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="definition-of-xj---lista-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xj---lista-" class="anchor"></a>Definition of <code>x[j] &lt;- list(a)</code>.</h2>
<p><code>x[j] &lt;- a</code> is equivalent to <code>x[j] &lt;- rep_along(j, a)</code> if <code>is_list(a, 1)</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb249-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="co">#&gt;       n     c li       </span></a>
<a class="sourceLine" id="cb249-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb249-5" data-line-number="5"><span class="co">#&gt; 1     0     0 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb249-6" data-line-number="6"><span class="co">#&gt; 2     0     0 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb249-7" data-line-number="7"><span class="co">#&gt; 3     0     0 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb249-8" data-line-number="8"><span class="co">#&gt; 4     0     0 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb250-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb250-3" data-line-number="3"><span class="co">#&gt;       n     c li       </span></a>
<a class="sourceLine" id="cb250-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb250-5" data-line-number="5"><span class="co">#&gt; 1     0     0 &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb250-6" data-line-number="6"><span class="co">#&gt; 2     0     0 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb250-7" data-line-number="7"><span class="co">#&gt; 3     0     0 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb250-8" data-line-number="8"><span class="co">#&gt; 4     0     0 &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb251-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb251-3" data-line-number="3"><span class="co">#&gt;       n     c    li</span></a>
<a class="sourceLine" id="cb251-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb251-5" data-line-number="5"><span class="co">#&gt; 1     0     0     0</span></a>
<a class="sourceLine" id="cb251-6" data-line-number="6"><span class="co">#&gt; 2     0     0     0</span></a>
<a class="sourceLine" id="cb251-7" data-line-number="7"><span class="co">#&gt; 3     0     0     0</span></a>
<a class="sourceLine" id="cb251-8" data-line-number="8"><span class="co">#&gt; 4     0     0     0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb252-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb252-3" data-line-number="3"><span class="co">#&gt;       n     c    li</span></a>
<a class="sourceLine" id="cb252-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb252-5" data-line-number="5"><span class="co">#&gt; 1     0     0     0</span></a>
<a class="sourceLine" id="cb252-6" data-line-number="6"><span class="co">#&gt; 2     0     0     0</span></a>
<a class="sourceLine" id="cb252-7" data-line-number="7"><span class="co">#&gt; 3     0     0     0</span></a>
<a class="sourceLine" id="cb252-8" data-line-number="8"><span class="co">#&gt; 4     0     0     0</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollary-3" class="section level3">
<h3 class="hasAnchor">
<a href="#corollary-3" class="anchor"></a>Corollary</h3>
<p>Only lists of length one are recycled.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 1:2, value = list(0, 0, 0)): provided 3
#&gt; variables to replace 2 variables</code></pre>
</div>
<pre><code>#&gt;   n c         li
#&gt; 1 0 0          9
#&gt; 2 0 0     10, 11
#&gt; 3 0 0 12, 13, 14
#&gt; 4 0 0       text</code></pre>
</td>
<td>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb258-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb258-3" data-line-number="3"><span class="co">#&gt; 1 0 0  0</span></a>
<a class="sourceLine" id="cb258-4" data-line-number="4"><span class="co">#&gt; 2 0 0  0</span></a>
<a class="sourceLine" id="cb258-5" data-line-number="5"><span class="co">#&gt; 3 0 0  0</span></a>
<a class="sourceLine" id="cb258-6" data-line-number="6"><span class="co">#&gt; 4 0 0  0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>, <span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="definition-of-xj---a--1" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xj---a--1" class="anchor"></a>Definition of <code>x[j] &lt;- a</code>.</h2>
<p><code>x[j] &lt;- a</code> is equivalent to <code>x[j] &lt;- list(a)</code> if <code>is_atomic(a)</code> or <code>is_null(a)</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb261-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb261-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb261-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb261-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb261-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb261-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb261-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb262-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb262-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb262-4" data-line-number="4"><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb262-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb262-6" data-line-number="6"><span class="co">#&gt; 2     0 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb262-7" data-line-number="7"><span class="co">#&gt; 3     0 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb262-8" data-line-number="8"><span class="co">#&gt; 4     0 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb263-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb263-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb263-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb263-5" data-line-number="5"><span class="co">#&gt; 1     4 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb263-6" data-line-number="6"><span class="co">#&gt; 2     3 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb263-7" data-line-number="7"><span class="co">#&gt; 3     2 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb263-8" data-line-number="8"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">4</span><span class="op">:</span><span class="dv">1</span>))</a>
<a class="sourceLine" id="cb264-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb264-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb264-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb264-5" data-line-number="5"><span class="co">#&gt; 1     4 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb264-6" data-line-number="6"><span class="co">#&gt; 2     3 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb264-7" data-line-number="7"><span class="co">#&gt; 3     2 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb264-8" data-line-number="8"><span class="co">#&gt; 4     1 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb265-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb265-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb265-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb265-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb265-6" data-line-number="6"><span class="co">#&gt; 2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb265-7" data-line-number="7"><span class="co">#&gt; 3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb265-8" data-line-number="8"><span class="co">#&gt; 4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb266-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb266-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb266-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb266-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb266-6" data-line-number="6"><span class="co">#&gt; 2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb266-7" data-line-number="7"><span class="co">#&gt; 3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb266-8" data-line-number="8"><span class="co">#&gt; 4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="rows" class="section level1">
<h1 class="hasAnchor">
<a href="#rows" class="anchor"></a>Rows</h1>
<div id="definition-of-xi--" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xi--" class="anchor"></a>Definition of <code>x[i, ]</code>.</h2>
<p>Applies <code><a href="https://rdrr.io/pkg/vctrs/man/vec_slice.html">vec_slice(, i)</a></code> to all columns, for both subsetting and subassignment.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1">tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ]</a>
<a class="sourceLine" id="cb267-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb267-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb267-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb267-5" data-line-number="5"><span class="co">#&gt; 1     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb267-6" data-line-number="6"><span class="co">#&gt; 2     3 g     &lt;int [3]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1">tbl[<span class="dv">0</span><span class="op">:</span><span class="dv">2</span>, ]</a>
<a class="sourceLine" id="cb268-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb268-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb268-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb268-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb268-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" data-line-number="1">tbl[<span class="dv">0</span>, ]</a>
<a class="sourceLine" id="cb269-2" data-line-number="2"><span class="co">#&gt; # A tibble: 0 x 3</span></a>
<a class="sourceLine" id="cb269-3" data-line-number="3"><span class="co">#&gt; # … with 3 variables: n &lt;int&gt;, c &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb269-4" data-line-number="4"><span class="co">#&gt; #   li &lt;list&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">2</span>, ]</a>
<a class="sourceLine" id="cb270-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb270-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb270-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb270-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb270-6" data-line-number="6"><span class="co">#&gt; 2     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb270-7" data-line-number="7"><span class="co">#&gt; 3     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1">df[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in xj[i]: only 0's may be
#&gt; mixed with negative subscripts</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't subset with a mix of
#&gt; negative and positive indices</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" data-line-number="1">tbl[<span class="ot">NA_integer_</span>, ]</a>
<a class="sourceLine" id="cb275-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb275-3" data-line-number="3"><span class="co">#&gt;       n c     li    </span></a>
<a class="sourceLine" id="cb275-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;</span></a>
<a class="sourceLine" id="cb275-5" data-line-number="5"><span class="co">#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1">tbl2[<span class="ot">NA_integer_</span>, ]</a>
<a class="sourceLine" id="cb276-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb276-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li    m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb276-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb276-5" data-line-number="5"><span class="co">#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;    NA    NA    NA</span></a>
<a class="sourceLine" id="cb276-6" data-line-number="6"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ]</a>
<a class="sourceLine" id="cb277-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 3</span></a>
<a class="sourceLine" id="cb277-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb277-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb277-5" data-line-number="5"><span class="co">#&gt; 1     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb277-6" data-line-number="6"><span class="co">#&gt; 2     3 g     &lt;int [3]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1">tbl[<span class="ot">TRUE</span>, ]</a>
<a class="sourceLine" id="cb278-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb278-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb278-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb278-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb278-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb278-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb278-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1">tbl[<span class="ot">FALSE</span>, ]</a>
<a class="sourceLine" id="cb279-2" data-line-number="2"><span class="co">#&gt; # A tibble: 0 x 3</span></a>
<a class="sourceLine" id="cb279-3" data-line-number="3"><span class="co">#&gt; # … with 3 variables: n &lt;int&gt;, c &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb279-4" data-line-number="4"><span class="co">#&gt; #   li &lt;list&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" data-line-number="1">tbl[<span class="ot">NA</span>, ]</a>
<a class="sourceLine" id="cb280-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb280-3" data-line-number="3"><span class="co">#&gt;       n c     li    </span></a>
<a class="sourceLine" id="cb280-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;</span></a>
<a class="sourceLine" id="cb280-5" data-line-number="5"><span class="co">#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</span></a>
<a class="sourceLine" id="cb280-6" data-line-number="6"><span class="co">#&gt; 2    NA &lt;NA&gt;  &lt;NULL&gt;</span></a>
<a class="sourceLine" id="cb280-7" data-line-number="7"><span class="co">#&gt; 3    NA &lt;NA&gt;  &lt;NULL&gt;</span></a>
<a class="sourceLine" id="cb280-8" data-line-number="8"><span class="co">#&gt; 4    NA &lt;NA&gt;  &lt;NULL&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb281-2" data-line-number="2"><span class="co">#&gt;   n c   li</span></a>
<a class="sourceLine" id="cb281-3" data-line-number="3"><span class="co">#&gt; 1 1 e    9</span></a>
<a class="sourceLine" id="cb281-4" data-line-number="4"><span class="co">#&gt; 2 1 e    9</span></a>
<a class="sourceLine" id="cb281-5" data-line-number="5"><span class="co">#&gt; 3 1 e    9</span></a>
<a class="sourceLine" id="cb281-6" data-line-number="6"><span class="co">#&gt; 4 4 h text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">0</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb284-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb284-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb284-4" data-line-number="4"><span class="co">#&gt; 2 1 e          9</span></a>
<a class="sourceLine" id="cb284-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb284-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">0</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">0</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb287-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb287-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb287-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb287-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb287-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb288-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">0</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 0. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb290-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb290-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb290-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb290-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb290-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb290-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb290-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in seq_len(nrows)[i]: only 0's
#&gt; may be mixed with negative
#&gt; subscripts</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb293-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't subset with a mix of
#&gt; negative and positive indices</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb295-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_integer_, , value =
#&gt; structure(list(: missing values are
#&gt; not allowed in subscripted
#&gt; assignments of data frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb297-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in if (new_nrow != nrow) {:
#&gt; missing value where TRUE/FALSE
#&gt; needed</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb299-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>df2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_integer_, , value =
#&gt; structure(list(: missing values are
#&gt; not allowed in subscripted
#&gt; assignments of data frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="ot">NA_integer_</span>, ] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in if (new_nrow != nrow) {:
#&gt; missing value where TRUE/FALSE
#&gt; needed</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb303-2" data-line-number="2"><span class="co">#&gt;   n c   li</span></a>
<a class="sourceLine" id="cb303-3" data-line-number="3"><span class="co">#&gt; 1 1 e    9</span></a>
<a class="sourceLine" id="cb303-4" data-line-number="4"><span class="co">#&gt; 2 1 e    9</span></a>
<a class="sourceLine" id="cb303-5" data-line-number="5"><span class="co">#&gt; 3 1 e    9</span></a>
<a class="sourceLine" id="cb303-6" data-line-number="6"><span class="co">#&gt; 4 4 h text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb304-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb306-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">TRUE</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb306-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb306-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb306-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb306-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb306-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb307-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">TRUE</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">FALSE</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb309-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb309-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb309-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb309-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb309-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">FALSE</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 0. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA, , value = structure(list(n = 1L,
#&gt; : missing values are not allowed in
#&gt; subscripted assignments of data
#&gt; frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb314-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in if (new_nrow != nrow) {:
#&gt; missing value where TRUE/FALSE
#&gt; needed</code></pre>
</div>
</td>
</tr>
</tbody></table>
<div id="corollary-4" class="section level3">
<h3 class="hasAnchor">
<a href="#corollary-4" class="anchor"></a>Corollary</h3>
<p>For logical vectors, out-of-bounds indexing and recycling of size &gt; 1 are not supported. (Character and numeric vectors are exceptions that are discussed below.)</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb316-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ]</a>
<a class="sourceLine" id="cb316-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb316-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb316-4" data-line-number="4"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb317-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Length of logical index must be
#&gt; 1 or 4, not 2</code></pre>
</div>
<pre><code>#&gt; # A tibble: 2 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     3 g     &lt;int [3]&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb320-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), ]</a>
<a class="sourceLine" id="cb320-2" data-line-number="2"><span class="co">#&gt;     n    c         li</span></a>
<a class="sourceLine" id="cb320-3" data-line-number="3"><span class="co">#&gt; 1   1    e          9</span></a>
<a class="sourceLine" id="cb320-4" data-line-number="4"><span class="co">#&gt; 3   3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb320-5" data-line-number="5"><span class="co">#&gt; NA NA &lt;NA&gt;       NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Length of logical index must be
#&gt; 1 or 4, not 5</code></pre>
</div>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     3 g     &lt;int [3]&gt;
#&gt; 3    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb324-2" data-line-number="2"><span class="co">#&gt;   n c     li</span></a>
<a class="sourceLine" id="cb324-3" data-line-number="3"><span class="co">#&gt; 1 1 e      9</span></a>
<a class="sourceLine" id="cb324-4" data-line-number="4"><span class="co">#&gt; 2 2 f 10, 11</span></a>
<a class="sourceLine" id="cb324-5" data-line-number="5"><span class="co">#&gt; 3 1 e      9</span></a>
<a class="sourceLine" id="cb324-6" data-line-number="6"><span class="co">#&gt; 4 4 h   text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb325-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Logical indices must have
#&gt; length 1 or be as long as the
#&gt; indexed vector.
#&gt; The vector has size 4 whereas the
#&gt; index has size 2.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; c(TRUE, FALSE, TRUE, FALSE, TRUE), :
#&gt; non-existent rows not allowed</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Logical indices must have
#&gt; length 1 or be as long as the
#&gt; indexed vector.
#&gt; The vector has size 4 whereas the
#&gt; index has size 5.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="subassignment-corollary" class="section level3">
<h3 class="hasAnchor">
<a href="#subassignment-corollary" class="anchor"></a>Subassignment corollary</h3>
<p>Only values of size one can be recycled.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb331-2" data-line-number="2"><span class="co">#&gt;   n c   li</span></a>
<a class="sourceLine" id="cb331-3" data-line-number="3"><span class="co">#&gt; 1 1 e    9</span></a>
<a class="sourceLine" id="cb331-4" data-line-number="4"><span class="co">#&gt; 2 0 0    0</span></a>
<a class="sourceLine" id="cb331-5" data-line-number="5"><span class="co">#&gt; 3 0 0    0</span></a>
<a class="sourceLine" id="cb331-6" data-line-number="6"><span class="co">#&gt; 4 4 h text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value` &lt;double&gt;
#&gt; and
#&gt; `x` &lt;character&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb334-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb334-2" data-line-number="2"><span class="co">#&gt;   n c   li</span></a>
<a class="sourceLine" id="cb334-3" data-line-number="3"><span class="co">#&gt; 1 1 e    9</span></a>
<a class="sourceLine" id="cb334-4" data-line-number="4"><span class="co">#&gt; 2 0 0    0</span></a>
<a class="sourceLine" id="cb334-5" data-line-number="5"><span class="co">#&gt; 3 1 1    1</span></a>
<a class="sourceLine" id="cb334-6" data-line-number="6"><span class="co">#&gt; 4 4 h text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ] &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value` &lt;integer&gt;
#&gt; and
#&gt; `x` &lt;character&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:4, , value = 0:1): replacement has
#&gt; 2 items, need 9</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(df[<span class="dv">1</span>, ]))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:4, , value = list(structure(list(:
#&gt; replacement element 1 is a
#&gt; matrix/data frame of 1 row, need 3</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[<span class="dv">1</span>, ]))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `x` &lt;tbl_df&lt;
#&gt; n : integer
#&gt; c : character
#&gt; li: list
#&gt; &gt;&gt; and `y` &lt;double[,4]&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb345-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ]))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:4, , value = list(structure(list(:
#&gt; replacement element 1 is a
#&gt; matrix/data frame of 2 rows, need 3</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, ] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ]))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="exception-1" class="section level3">
<h3 class="hasAnchor">
<a href="#exception-1" class="anchor"></a>Exception</h3>
<p>For compatibility reasons only a warning is issued for indexing beyond the number of rows. Appending rows right at the end of the existing data is supported, without warning.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" data-line-number="1">df[<span class="dv">5</span>, ]</a>
<a class="sourceLine" id="cb349-2" data-line-number="2"><span class="co">#&gt;     n    c   li</span></a>
<a class="sourceLine" id="cb349-3" data-line-number="3"><span class="co">#&gt; NA NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" data-line-number="1">tbl[<span class="dv">5</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Row indexes must be between 0
#&gt; and the number of rows (4). Use `NA` as
#&gt; row index to obtain a row full of `NA`
#&gt; values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 1 x 3
#&gt;       n c     li    
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;
#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1">df[<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>, ]</a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="co">#&gt;       n    c   li</span></a>
<a class="sourceLine" id="cb353-3" data-line-number="3"><span class="co">#&gt; NA   NA &lt;NA&gt; NULL</span></a>
<a class="sourceLine" id="cb353-4" data-line-number="4"><span class="co">#&gt; NA.1 NA &lt;NA&gt; NULL</span></a>
<a class="sourceLine" id="cb353-5" data-line-number="5"><span class="co">#&gt; NA.2 NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" data-line-number="1">tbl[<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Row indexes must be between 0
#&gt; and the number of rows (4). Use `NA` as
#&gt; row index to obtain a row full of `NA`
#&gt; values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;       n c     li    
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;
#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;
#&gt; 2    NA &lt;NA&gt;  &lt;NULL&gt;
#&gt; 3    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" data-line-number="1">df[<span class="dv">6</span>, ]</a>
<a class="sourceLine" id="cb357-2" data-line-number="2"><span class="co">#&gt;     n    c   li</span></a>
<a class="sourceLine" id="cb357-3" data-line-number="3"><span class="co">#&gt; NA NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" data-line-number="1">tbl[<span class="dv">6</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Row indexes must be between 0
#&gt; and the number of rows (4). Use `NA` as
#&gt; row index to obtain a row full of `NA`
#&gt; values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 1 x 3
#&gt;       n c     li    
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;
#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">5</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb361-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb361-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb361-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb361-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb361-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a>
<a class="sourceLine" id="cb361-7" data-line-number="7"><span class="co">#&gt; 5 1 e          9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 1. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb364-2" data-line-number="2"><span class="co">#&gt; # A tibble: 7 x 3</span></a>
<a class="sourceLine" id="cb364-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb364-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb364-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb364-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb364-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb364-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a>
<a class="sourceLine" id="cb364-9" data-line-number="9"><span class="co">#&gt; 5     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb364-10" data-line-number="10"><span class="co">#&gt; 6     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb364-11" data-line-number="11"><span class="co">#&gt; 7     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">6</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb365-2" data-line-number="2"><span class="co">#&gt;    n    c         li</span></a>
<a class="sourceLine" id="cb365-3" data-line-number="3"><span class="co">#&gt; 1  1    e          9</span></a>
<a class="sourceLine" id="cb365-4" data-line-number="4"><span class="co">#&gt; 2  2    f     10, 11</span></a>
<a class="sourceLine" id="cb365-5" data-line-number="5"><span class="co">#&gt; 3  3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb365-6" data-line-number="6"><span class="co">#&gt; 4  4    h       text</span></a>
<a class="sourceLine" id="cb365-7" data-line-number="7"><span class="co">#&gt; 5 NA &lt;NA&gt;       NULL</span></a>
<a class="sourceLine" id="cb365-8" data-line-number="8"><span class="co">#&gt; 6  1    e          9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">6</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in
#&gt; error_new_rows_at_end_only(): could
#&gt; not find function
#&gt; "error_new_rows_at_end_only"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1">df[<span class="op">-</span><span class="dv">5</span>, ]</a>
<a class="sourceLine" id="cb368-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb368-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb368-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb368-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb368-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">5</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Negative row indexes must be
#&gt; between 0 and the number of rows negated
#&gt; (-4). Use `NA` as row index to obtain a
#&gt; row full of `NA` values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 4 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     2 f     &lt;int [2]&gt;
#&gt; 3     3 g     &lt;int [3]&gt;
#&gt; 4     4 h     &lt;chr [1]&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1">df[<span class="op">-</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>), ]</a>
<a class="sourceLine" id="cb372-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb372-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb372-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb372-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb372-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1">tbl[<span class="op">-</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>), ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Negative row indexes must be
#&gt; between 0 and the number of rows negated
#&gt; (-4). Use `NA` as row index to obtain a
#&gt; row full of `NA` values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 4 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     2 f     &lt;int [2]&gt;
#&gt; 3     3 g     &lt;int [3]&gt;
#&gt; 4     4 h     &lt;chr [1]&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1">df[<span class="op">-</span><span class="dv">6</span>, ]</a>
<a class="sourceLine" id="cb376-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb376-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb376-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb376-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb376-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" data-line-number="1">tbl[<span class="op">-</span><span class="dv">6</span>, ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Negative row indexes must be
#&gt; between 0 and the number of rows negated
#&gt; (-4). Use `NA` as row index to obtain a
#&gt; row full of `NA` values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 4 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     2 f     &lt;int [2]&gt;
#&gt; 3     3 g     &lt;int [3]&gt;
#&gt; 4     4 h     &lt;chr [1]&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb380-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span><span class="dv">5</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb380-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb380-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb380-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb380-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb380-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">5</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 4 and you've
#&gt; tried to subset element 5.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb383-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb383-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb383-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb383-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb383-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb384-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">7</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 4 and you've
#&gt; tried to subset element 5.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="op">-</span><span class="dv">6</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb386-2" data-line-number="2"><span class="co">#&gt;   n c li</span></a>
<a class="sourceLine" id="cb386-3" data-line-number="3"><span class="co">#&gt; 1 1 e  9</span></a>
<a class="sourceLine" id="cb386-4" data-line-number="4"><span class="co">#&gt; 2 1 e  9</span></a>
<a class="sourceLine" id="cb386-5" data-line-number="5"><span class="co">#&gt; 3 1 e  9</span></a>
<a class="sourceLine" id="cb386-6" data-line-number="6"><span class="co">#&gt; 4 1 e  9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="op">-</span><span class="dv">6</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index beyond the end of
#&gt; a vector.
#&gt; The vector has length 4 and you've
#&gt; tried to subset element 6.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p>For compatibility reasons, character vectors that represent numbers are supported.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), ]</a>
<a class="sourceLine" id="cb389-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb389-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb389-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb389-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb389-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb389-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb390-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), ]</a>
<a class="sourceLine" id="cb390-2" data-line-number="2"><span class="co">#&gt;       n    c   li</span></a>
<a class="sourceLine" id="cb390-3" data-line-number="3"><span class="co">#&gt; NA   NA &lt;NA&gt; NULL</span></a>
<a class="sourceLine" id="cb390-4" data-line-number="4"><span class="co">#&gt; NA.1 NA &lt;NA&gt; NULL</span></a>
<a class="sourceLine" id="cb390-5" data-line-number="5"><span class="co">#&gt; NA.2 NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), ]</a>
<a class="sourceLine" id="cb391-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb391-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb391-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb391-5" data-line-number="5"><span class="co">#&gt; 1     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb392-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>), ]</a>
<a class="sourceLine" id="cb392-2" data-line-number="2"><span class="co">#&gt;     n    c         li</span></a>
<a class="sourceLine" id="cb392-3" data-line-number="3"><span class="co">#&gt; 3   3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb392-4" data-line-number="4"><span class="co">#&gt; 4   4    h       text</span></a>
<a class="sourceLine" id="cb392-5" data-line-number="5"><span class="co">#&gt; NA NA &lt;NA&gt;       NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb393-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>), ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Only valid row names can be
#&gt; used for indexing. Use `NA` as row index
#&gt; to obtain a row full of `NA` values.</code></pre>
</div>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     3 g     &lt;int [3]&gt;
#&gt; 2     4 h     &lt;chr [1]&gt;
#&gt; 3    NA &lt;NA&gt;  &lt;NULL&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb396-1" data-line-number="1">df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)), ]</a>
<a class="sourceLine" id="cb396-2" data-line-number="2"><span class="co">#&gt;       n    c   li</span></a>
<a class="sourceLine" id="cb396-3" data-line-number="3"><span class="co">#&gt; NA   NA &lt;NA&gt; NULL</span></a>
<a class="sourceLine" id="cb396-4" data-line-number="4"><span class="co">#&gt; NA.1 NA &lt;NA&gt; NULL</span></a>
<a class="sourceLine" id="cb396-5" data-line-number="5"><span class="co">#&gt; NA.2 NA &lt;NA&gt; NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb397-1" data-line-number="1">tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)), ]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in is.na(i) &amp; !is_na_orig:
#&gt; longer object length is not a multiple
#&gt; of shorter object length</code></pre>
</div>
<pre><code>#&gt; # A tibble: 2 x 3
#&gt;       n c     li       
#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   
#&gt; 1     1 e     &lt;dbl [1]&gt;
#&gt; 2     2 f     &lt;int [2]&gt;</code></pre>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb400-1" data-line-number="1">tbl[<span class="ot">NA_character_</span>, ]</a>
<a class="sourceLine" id="cb400-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb400-3" data-line-number="3"><span class="co">#&gt;       n c     li    </span></a>
<a class="sourceLine" id="cb400-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;</span></a>
<a class="sourceLine" id="cb400-5" data-line-number="5"><span class="co">#&gt; 1    NA &lt;NA&gt;  &lt;NULL&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb401-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb401-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb401-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb401-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb401-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb401-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb401-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb401-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb402-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb402-2" data-line-number="2"><span class="co">#&gt;    n c         li</span></a>
<a class="sourceLine" id="cb402-3" data-line-number="3"><span class="co">#&gt; 1  1 e          9</span></a>
<a class="sourceLine" id="cb402-4" data-line-number="4"><span class="co">#&gt; 2  2 f     10, 11</span></a>
<a class="sourceLine" id="cb402-5" data-line-number="5"><span class="co">#&gt; 3  3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb402-6" data-line-number="6"><span class="co">#&gt; 4  4 h       text</span></a>
<a class="sourceLine" id="cb402-7" data-line-number="7"><span class="co">#&gt; -1 1 e          9</span></a>
<a class="sourceLine" id="cb402-8" data-line-number="8"><span class="co">#&gt; -2 1 e          9</span></a>
<a class="sourceLine" id="cb402-9" data-line-number="9"><span class="co">#&gt; -3 1 e          9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb403-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 1. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb405-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb405-2" data-line-number="2"><span class="co">#&gt;   n c     li</span></a>
<a class="sourceLine" id="cb405-3" data-line-number="3"><span class="co">#&gt; 1 1 e      9</span></a>
<a class="sourceLine" id="cb405-4" data-line-number="4"><span class="co">#&gt; 2 2 f 10, 11</span></a>
<a class="sourceLine" id="cb405-5" data-line-number="5"><span class="co">#&gt; 3 1 e      9</span></a>
<a class="sourceLine" id="cb405-6" data-line-number="6"><span class="co">#&gt; 4 1 e      9</span></a>
<a class="sourceLine" id="cb405-7" data-line-number="7"><span class="co">#&gt; 5 1 e      9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb406-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: Only valid row names can be
#&gt; used for indexing. Use `NA` as row index
#&gt; to obtain a row full of `NA` values.</code></pre>
</div>
<div class="error">
<pre><code>#&gt; Error in if (new_nrow != nrow) {:
#&gt; missing value where TRUE/FALSE
#&gt; needed</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb409-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)), ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb409-2" data-line-number="2"><span class="co">#&gt;    n c         li</span></a>
<a class="sourceLine" id="cb409-3" data-line-number="3"><span class="co">#&gt; 1  1 e          9</span></a>
<a class="sourceLine" id="cb409-4" data-line-number="4"><span class="co">#&gt; 2  2 f     10, 11</span></a>
<a class="sourceLine" id="cb409-5" data-line-number="5"><span class="co">#&gt; 3  3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb409-6" data-line-number="6"><span class="co">#&gt; 4  4 h       text</span></a>
<a class="sourceLine" id="cb409-7" data-line-number="7"><span class="co">#&gt; -3 1 e          9</span></a>
<a class="sourceLine" id="cb409-8" data-line-number="8"><span class="co">#&gt; -4 1 e          9</span></a>
<a class="sourceLine" id="cb409-9" data-line-number="9"><span class="co">#&gt; -5 1 e          9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb410-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="op">-</span>(<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>)), ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in is.na(i) &amp; !is_na_orig:
#&gt; longer object length is not a multiple
#&gt; of shorter object length</code></pre>
</div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb413-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="ot">NA_character_</span>, ] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`,
#&gt; NA_character_, , value =
#&gt; structure(list(: missing values are
#&gt; not allowed in subscripted
#&gt; assignments of data frames</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb415-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="ot">NA_character_</span>, ] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in if (new_nrow != nrow) {:
#&gt; missing value where TRUE/FALSE
#&gt; needed</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div id="definition-of-xi-j-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xi-j-" class="anchor"></a>Definition of <code>x[i, j]</code>.</h2>
<p><code>x[i, j]</code> is equivalent to <code>x[j][i, ]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb417-1" data-line-number="1">df[<span class="dv">1</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb417-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb418-1" data-line-number="1">tbl[<span class="dv">1</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb418-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb418-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb418-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb418-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb419-1" data-line-number="1">df[<span class="dv">1</span>][<span class="dv">1</span>, ]</a>
<a class="sourceLine" id="cb419-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb420-1" data-line-number="1">tbl[<span class="dv">1</span>][<span class="dv">1</span>, ]</a>
<a class="sourceLine" id="cb420-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb420-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb420-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb420-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb421-1" data-line-number="1">tbl[<span class="dv">1</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb421-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb421-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb421-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb421-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb422-1" data-line-number="1">tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>][<span class="dv">1</span>, ]</a>
<a class="sourceLine" id="cb422-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb422-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb422-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb422-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb423-1" data-line-number="1">df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb423-2" data-line-number="2"><span class="co">#&gt; [1] 2 3</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb424-1" data-line-number="1">tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb424-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 1</span></a>
<a class="sourceLine" id="cb424-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb424-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb424-5" data-line-number="5"><span class="co">#&gt; 1     2</span></a>
<a class="sourceLine" id="cb424-6" data-line-number="6"><span class="co">#&gt; 2     3</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb425-1" data-line-number="1">df[<span class="dv">1</span>][<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ]</a>
<a class="sourceLine" id="cb425-2" data-line-number="2"><span class="co">#&gt; [1] 2 3</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb426-1" data-line-number="1">tbl[<span class="dv">1</span>][<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ]</a>
<a class="sourceLine" id="cb426-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 1</span></a>
<a class="sourceLine" id="cb426-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb426-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb426-5" data-line-number="5"><span class="co">#&gt; 1     2</span></a>
<a class="sourceLine" id="cb426-6" data-line-number="6"><span class="co">#&gt; 2     3</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb427-1" data-line-number="1">tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb427-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb427-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb427-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb427-5" data-line-number="5"><span class="co">#&gt; 1     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb427-6" data-line-number="6"><span class="co">#&gt; 2     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb427-7" data-line-number="7"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb428-1" data-line-number="1">tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>][<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, ]</a>
<a class="sourceLine" id="cb428-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb428-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb428-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb428-5" data-line-number="5"><span class="co">#&gt; 1     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb428-6" data-line-number="6"><span class="co">#&gt; 2     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb428-7" data-line-number="7"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollaries-2" class="section level3">
<h3 class="hasAnchor">
<a href="#corollaries-2" class="anchor"></a>Corollaries</h3>
<p><code>x[i, j] &lt;-</code> can update only existing columns, it cannot create or remove columns.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb429-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb429-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb429-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb429-4" data-line-number="4"><span class="co">#&gt; 2 1 f     10, 11</span></a>
<a class="sourceLine" id="cb429-5" data-line-number="5"><span class="co">#&gt; 3 1 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb429-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb430-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb430-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb430-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb430-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb430-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb430-6" data-line-number="6"><span class="co">#&gt; 2     1 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb430-7" data-line-number="7"><span class="co">#&gt; 3     1 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb430-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb431-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"x"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb431-2" data-line-number="2"><span class="co">#&gt;   n c         li  x</span></a>
<a class="sourceLine" id="cb431-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9 NA</span></a>
<a class="sourceLine" id="cb431-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11  1</span></a>
<a class="sourceLine" id="cb431-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14  1</span></a>
<a class="sourceLine" id="cb431-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text NA</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb432-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"x"</span>] &lt;-<span class="st"> </span><span class="dv">1</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error: Can't index non-existing
#&gt; elements.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb434-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[jj]][iseq] &lt;- vjj:
#&gt; replacement has length zero</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb436-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="ot">NULL</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; `value` must be a vector, not NULL</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[i, j] &lt;-</code> can’t change the data type of existing columns.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb438-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a>
<a class="sourceLine" id="cb438-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb438-3" data-line-number="3"><span class="co">#&gt; 1 1 e          9</span></a>
<a class="sourceLine" id="cb438-4" data-line-number="4"><span class="co">#&gt; 2 e f     10, 11</span></a>
<a class="sourceLine" id="cb438-5" data-line-number="5"><span class="co">#&gt; 3 f g 12, 13, 14</span></a>
<a class="sourceLine" id="cb438-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb439-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value`
#&gt; &lt;character&gt;
#&gt; and `x` &lt;integer&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb441-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span>])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:3, 2, value = list(9, 10:11)):
#&gt; provided 2 variables to replace 1
#&gt; variables</code></pre>
</div>
<pre><code>#&gt;   n c         li
#&gt; 1 1 e          9
#&gt; 2 2 9     10, 11
#&gt; 3 3 9 12, 13, 14
#&gt; 4 4 h       text</code></pre>
</td>
<td>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb444-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value` &lt;list&gt;
#&gt; and
#&gt; `x` &lt;character&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb446-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 2:3, 3, value = structure(list(n =
#&gt; 1:2, : provided 3 variables to replace 1
#&gt; variables</code></pre>
</div>
<pre><code>#&gt;   n c   li
#&gt; 1 1 e    9
#&gt; 2 2 f    1
#&gt; 3 3 g    2
#&gt; 4 4 h text</code></pre>
</td>
<td>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb449-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `x` &lt;tbl_df&lt;
#&gt; n : integer
#&gt; c : character
#&gt; li: list
#&gt; &gt;&gt; and `y` &lt;list&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb451-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in matrix(value, n, p): data
#&gt; length [8] is not a sub-multiple or
#&gt; multiple of the number of columns [3]</code></pre>
</div>
<pre><code>#&gt;   tb.n tb.c tb.li m.1 m.2 m.3 m.4
#&gt; 1    1    e     9   1   0   0   0
#&gt; 2    1    0     0   0   1   0   0
#&gt; 3    0    1     0   0   0   1   0
#&gt; 4    4    h  text   0   0   0   1</code></pre>
</td>
<td>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb454-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">2</span>])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; No common type for `value`
#&gt; &lt;double[,4]&gt; and `x` &lt;tbl_df&lt;
#&gt; n : integer
#&gt; c : character
#&gt; li: list
#&gt; &gt;&gt;.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb456-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>])</a>
<a class="sourceLine" id="cb456-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb456-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb456-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb456-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb456-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     1     1     1</span></a>
<a class="sourceLine" id="cb456-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     2     2     2</span></a>
<a class="sourceLine" id="cb456-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb456-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>x[i, j] &lt;-</code> can’t append rows.</p>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb457-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">5</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a>
<a class="sourceLine" id="cb457-2" data-line-number="2"><span class="co">#&gt;   n    c         li</span></a>
<a class="sourceLine" id="cb457-3" data-line-number="3"><span class="co">#&gt; 1 1    e          9</span></a>
<a class="sourceLine" id="cb457-4" data-line-number="4"><span class="co">#&gt; 2 2    f     10, 11</span></a>
<a class="sourceLine" id="cb457-5" data-line-number="5"><span class="co">#&gt; 3 3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb457-6" data-line-number="6"><span class="co">#&gt; 4 4    h       text</span></a>
<a class="sourceLine" id="cb457-7" data-line-number="7"><span class="co">#&gt; 5 0 &lt;NA&gt;       NULL</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb458-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">5</span>, <span class="st">"n"</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dv">0</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 5 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr></tbody></table>
</div>
</div>
<div id="definition-of-xi-j--1" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-xi-j--1" class="anchor"></a>Definition of <code>x[[i, j]]</code>.</h2>
<p><code>x[[i, j]]</code> is equivalent to <code>x[i, ][[j]]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb460-1" data-line-number="1">tbl[[<span class="dv">1</span>, <span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb460-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb461-1" data-line-number="1">tbl[<span class="dv">1</span>, ][[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb461-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb462-1" data-line-number="1">df[[<span class="dv">1</span>, <span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb462-2" data-line-number="2"><span class="co">#&gt; [1] 9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb463-1" data-line-number="1">tbl[[<span class="dv">1</span>, <span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb463-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb463-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb464-1" data-line-number="1">tbl[<span class="dv">1</span>, ][[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb464-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb464-3" data-line-number="3"><span class="co">#&gt; [1] 9</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb465-1" data-line-number="1">df2[[<span class="dv">1</span>, <span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb465-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb466-1" data-line-number="1">tbl2[[<span class="dv">1</span>, <span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb466-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb466-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb466-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb466-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb467-1" data-line-number="1">tbl2[<span class="dv">1</span>, ][[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb467-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb467-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb467-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb467-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb468-1" data-line-number="1">df2[[<span class="dv">1</span>, <span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb468-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb469-1" data-line-number="1">tbl2[[<span class="dv">1</span>, <span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb469-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb469-3" data-line-number="3"><span class="co">#&gt; [1,]    1    0    0    0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb470-1" data-line-number="1">tbl2[<span class="dv">1</span>, ][[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb470-2" data-line-number="2"><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></a>
<a class="sourceLine" id="cb470-3" data-line-number="3"><span class="co">#&gt; [1,]    1    0    0    0</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb471-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb471-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb471-3" data-line-number="3"><span class="co">#&gt; 1 0 e          9</span></a>
<a class="sourceLine" id="cb471-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb471-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb471-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb472-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb472-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb472-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb472-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb472-5" data-line-number="5"><span class="co">#&gt; 1     0 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb472-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb472-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb472-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb473-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb473-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb473-3" data-line-number="3"><span class="co">#&gt; 1 0 e          9</span></a>
<a class="sourceLine" id="cb473-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb473-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb473-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb474-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 1. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb476-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>, <span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb476-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb476-3" data-line-number="3"><span class="co">#&gt; 1 1 e       NULL</span></a>
<a class="sourceLine" id="cb476-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb476-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb476-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb477-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb477-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb477-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb477-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb477-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;NULL&gt;   </span></a>
<a class="sourceLine" id="cb477-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb477-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb477-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb478-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span>, ][[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a>
<a class="sourceLine" id="cb478-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb478-3" data-line-number="3"><span class="co">#&gt; 1 1 e       NULL</span></a>
<a class="sourceLine" id="cb478-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb478-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb478-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb479-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, ][[<span class="dv">3</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="ot">NULL</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 1. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb481-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; iseq, value = structure(list(n = 1L,
#&gt; : replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb483-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb483-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb483-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb483-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb483-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb483-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb483-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb483-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb483-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb484-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span>df[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb484-2" data-line-number="2"><span class="co">#&gt;   tb.n tb.c      tb.li m.1 m.2 m.3 m.4</span></a>
<a class="sourceLine" id="cb484-3" data-line-number="3"><span class="co">#&gt; 1    1    e          9   1   0   0   0</span></a>
<a class="sourceLine" id="cb484-4" data-line-number="4"><span class="co">#&gt; 2    2    f     10, 11   0   1   0   0</span></a>
<a class="sourceLine" id="cb484-5" data-line-number="5"><span class="co">#&gt; 3    3    g 12, 13, 14   0   0   1   0</span></a>
<a class="sourceLine" id="cb484-6" data-line-number="6"><span class="co">#&gt; 4    4    h       text   0   0   0   1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb485-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>, ][[<span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 1. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb487-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[jseq]][[iseq]] &lt;- value:
#&gt; more elements supplied than there
#&gt; are to replace</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb489-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a>
<a class="sourceLine" id="cb489-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb489-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb489-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb489-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     2     3</span></a>
<a class="sourceLine" id="cb489-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb489-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb489-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb489-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb490-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">1</span>, ][[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a>
<a class="sourceLine" id="cb490-2" data-line-number="2"><span class="co">#&gt;   tb.n tb.c      tb.li m.1 m.2 m.3 m.4</span></a>
<a class="sourceLine" id="cb490-3" data-line-number="3"><span class="co">#&gt; 1    1    e          9   1   2   3   4</span></a>
<a class="sourceLine" id="cb490-4" data-line-number="4"><span class="co">#&gt; 2    2    f     10, 11   0   1   0   0</span></a>
<a class="sourceLine" id="cb490-5" data-line-number="5"><span class="co">#&gt; 3    3    g 12, 13, 14   0   0   1   0</span></a>
<a class="sourceLine" id="cb490-6" data-line-number="6"><span class="co">#&gt; 4    4    h       text   0   0   0   1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb491-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>, ][[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/t.html">t</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>))</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 1. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vec_as_index(i)</a></code> must be scalar.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb493-1" data-line-number="1">df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in col[[i, exact = exact]]:
#&gt; attempt to select more than one
#&gt; element in vectorIndex</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb495-1" data-line-number="1">tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]]</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb497-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; 1:2, 1, value = 0): only a single
#&gt; element should be replaced</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb499-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">0</span>)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<div id="corollaries-3" class="section level3">
<h3 class="hasAnchor">
<a href="#corollaries-3" class="anchor"></a>Corollaries</h3>
<p><code>x[[i, j]]</code> always returns an object of size 1.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb501-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="dv">2</span>, <span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb501-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb502-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(df[[<span class="dv">2</span>, <span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb502-2" data-line-number="2"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb503-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="dv">2</span>, <span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb503-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb504-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(df2[[<span class="dv">2</span>, <span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb504-2" data-line-number="2"><span class="co">#&gt; [1] 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb505-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="dv">2</span>, <span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb505-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb506-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="dv">2</span>, <span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb506-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb507-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(df[[<span class="ot">NA</span>, <span class="dv">1</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in col[[i, exact = exact]]:
#&gt; subscript out of bounds</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb509-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="ot">NA</span>, <span class="dv">1</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb511-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(df[[<span class="ot">NA</span>, <span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb511-2" data-line-number="2"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb512-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl[[<span class="ot">NA</span>, <span class="dv">3</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb514-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(df2[[<span class="ot">NA</span>, <span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb514-2" data-line-number="2"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb515-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="ot">NA</span>, <span class="dv">1</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb517-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(df2[[<span class="ot">NA</span>, <span class="dv">2</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in col[[i, exact = exact]]:
#&gt; subscript out of bounds</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb519-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/pkg/vctrs/man/vec_size.html">vec_size</a></span>(tbl2[[<span class="ot">NA</span>, <span class="dv">2</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in error_need_scalar(): could
#&gt; not find function
#&gt; "error_need_scalar"</code></pre>
</div>
</td>
</tr>
</tbody></table>
<p><code>x[[i, j]]</code> and <code>x[i, ][[j]]</code> can be used interchangeably on the LHS or RHS of an assignment for the four principal column types:</p>
<ul>
<li>atomic: <code>df[[1]]</code>
</li>
<li>list: <code>df[[3]]</code>
</li>
<li>data frame: <code>df2[[1]]</code>
</li>
<li>matrix: <code>df2[[2]]</code>
</li>
</ul>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb521-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">2</span>, ][[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb521-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb521-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb521-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb521-5" data-line-number="5"><span class="co">#&gt; 1     2 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb521-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb521-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb521-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb522-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[[<span class="dv">2</span>, <span class="dv">1</span>]]))</a>
<a class="sourceLine" id="cb522-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb522-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb522-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb522-5" data-line-number="5"><span class="co">#&gt; 1     2 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb522-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb522-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb522-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb523-1" data-line-number="1"><span class="kw">with_df</span>(df[[<span class="dv">1</span>, <span class="dv">3</span>]] &lt;-<span class="st"> </span>df[<span class="dv">2</span>, ][[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb523-2" data-line-number="2"><span class="co">#&gt;   n c         li</span></a>
<a class="sourceLine" id="cb523-3" data-line-number="3"><span class="co">#&gt; 1 1 e     10, 11</span></a>
<a class="sourceLine" id="cb523-4" data-line-number="4"><span class="co">#&gt; 2 2 f     10, 11</span></a>
<a class="sourceLine" id="cb523-5" data-line-number="5"><span class="co">#&gt; 3 3 g 12, 13, 14</span></a>
<a class="sourceLine" id="cb523-6" data-line-number="6"><span class="co">#&gt; 4 4 h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb524-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">3</span>]] &lt;-<span class="st"> </span>tbl[<span class="dv">2</span>, ][[<span class="dv">3</span>]])</a>
<a class="sourceLine" id="cb524-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb524-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb524-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb524-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb524-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb524-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb524-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb525-1" data-line-number="1"><span class="kw">with_df</span>(df[<span class="dv">1</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(df[[<span class="dv">2</span>, <span class="dv">3</span>]]))</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 1, 3, value = list(10:11)): replacement
#&gt; element 1 has 2 rows to replace 1 rows</code></pre>
</div>
<pre><code>#&gt;   n c         li
#&gt; 1 1 e         10
#&gt; 2 2 f     10, 11
#&gt; 3 3 g 12, 13, 14
#&gt; 4 4 h       text</code></pre>
</td>
<td>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb528-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl[[<span class="dv">2</span>, <span class="dv">3</span>]]))</a>
<a class="sourceLine" id="cb528-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb528-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb528-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb528-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb528-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb528-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb528-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb529-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>df2[<span class="dv">2</span>, ][[<span class="dv">1</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[[&lt;-.data.frame`(`*tmp*`,
#&gt; iseq, value = structure(list(n = 2L,
#&gt; : replacement has 1 row, data has 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb531-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>, <span class="dv">1</span>]] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span>, ][[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb531-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb531-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb531-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb531-5" data-line-number="5"><span class="co">#&gt; 1     2 f     &lt;int [2…     1     0     0</span></a>
<a class="sourceLine" id="cb531-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb531-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb531-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb531-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb532-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">1</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(df2[[<span class="dv">2</span>, <span class="dv">1</span>]]))</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`,
#&gt; 1, 1, value = list(c("e", "f", "g", :
#&gt; replacement element 1 has 4 rows to
#&gt; replace 1 rows</code></pre>
</div>
<pre><code>#&gt;   tb.n tb.c      tb.li m.1 m.2 m.3 m.4
#&gt; 1    e    e          e   1   0   0   0
#&gt; 2    2    f     10, 11   0   1   0   0
#&gt; 3    3    g 12, 13, 14   0   0   1   0
#&gt; 4    4    h       text   0   0   0   1</code></pre>
</td>
<td>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb535-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl2[[<span class="dv">2</span>, <span class="dv">1</span>]]))</a>
<a class="sourceLine" id="cb535-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb535-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb535-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb535-5" data-line-number="5"><span class="co">#&gt; 1     2 f     &lt;int [2…     1     0     0</span></a>
<a class="sourceLine" id="cb535-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb535-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb535-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb535-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb536-1" data-line-number="1"><span class="kw">with_df2</span>(df2[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> </span>df2[<span class="dv">2</span>, ][[<span class="dv">2</span>]])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in x[[jseq]][[iseq]] &lt;- value:
#&gt; more elements supplied than there
#&gt; are to replace</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb538-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span>, ][[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb538-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb538-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb538-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb538-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     0     1     0</span></a>
<a class="sourceLine" id="cb538-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb538-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb538-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb538-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb539-1" data-line-number="1"><span class="kw">with_df2</span>(df2[<span class="dv">1</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(df2[[<span class="dv">2</span>, <span class="dv">2</span>]]))</a>
<a class="sourceLine" id="cb539-2" data-line-number="2"><span class="co">#&gt;   tb.n tb.c      tb.li m.1 m.2 m.3 m.4</span></a>
<a class="sourceLine" id="cb539-3" data-line-number="3"><span class="co">#&gt; 1    1    e          9   0   0   0   0</span></a>
<a class="sourceLine" id="cb539-4" data-line-number="4"><span class="co">#&gt; 2    2    f     10, 11   0   1   0   0</span></a>
<a class="sourceLine" id="cb539-5" data-line-number="5"><span class="co">#&gt; 3    3    g 12, 13, 14   0   0   1   0</span></a>
<a class="sourceLine" id="cb539-6" data-line-number="6"><span class="co">#&gt; 4    4    h       text   0   0   0   1</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb540-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(tbl2[[<span class="dv">2</span>, <span class="dv">2</span>]]))</a>
<a class="sourceLine" id="cb540-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb540-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb540-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb540-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     0     1     0</span></a>
<a class="sourceLine" id="cb540-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb540-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb540-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb540-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<p><code>x[[i, j]]</code> is equivalent to <code>x[i, j][[1]]</code> with the additional requirement <code><a href="https://rdrr.io/pkg/vctrs/man/vec_as_index.html">vec_as_index(j)</a></code> scalar.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb541-1" data-line-number="1">tbl[[<span class="dv">1</span>, <span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb541-2" data-line-number="2"><span class="co">#&gt; [1] "e"</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb542-1" data-line-number="1">tbl[<span class="dv">1</span>, <span class="dv">2</span>][[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb542-2" data-line-number="2"><span class="co">#&gt; [1] "e"</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb543-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[[<span class="dv">1</span>, <span class="dv">2</span>]] &lt;-<span class="st"> "x"</span>)</a>
<a class="sourceLine" id="cb543-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb543-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb543-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb543-5" data-line-number="5"><span class="co">#&gt; 1     1 x     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb543-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb543-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb543-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb544-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">1</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"x"</span>))</a>
<a class="sourceLine" id="cb544-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb544-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb544-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb544-5" data-line-number="5"><span class="co">#&gt; 1     1 x     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb544-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb544-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb544-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div id="missing-j-indexes" class="section level1">
<h1 class="hasAnchor">
<a href="#missing-j-indexes" class="anchor"></a>Missing <code>j</code> indexes</h1>
<div id="definition-of-x-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-x-" class="anchor"></a>Definition of <code>x[]</code>.</h2>
<p><code>x[]</code> is equivalent to <code>x[seq_len(ncol(x))]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb545-1" data-line-number="1">tbl[]</a>
<a class="sourceLine" id="cb545-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb545-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb545-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb545-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb545-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb545-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb545-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb546-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl)</a>
<a class="sourceLine" id="cb546-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb546-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb546-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb546-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb546-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb546-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb546-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb547-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb547-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb547-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb547-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb547-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb547-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb547-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb547-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb548-1" data-line-number="1"><span class="kw">with_df</span>(df[] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a>
<a class="sourceLine" id="cb548-2" data-line-number="2"><span class="co">#&gt;   n c     li</span></a>
<a class="sourceLine" id="cb548-3" data-line-number="3"><span class="co">#&gt; 1 1 e      9</span></a>
<a class="sourceLine" id="cb548-4" data-line-number="4"><span class="co">#&gt; 2 2 f 10, 11</span></a>
<a class="sourceLine" id="cb548-5" data-line-number="5"><span class="co">#&gt; 3 1 e      9</span></a>
<a class="sourceLine" id="cb548-6" data-line-number="6"><span class="co">#&gt; 4 2 f 10, 11</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb549-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb551-1" data-line-number="1"><span class="kw">with_df</span>(df[] &lt;-<span class="st"> </span>df2)</a>
<a class="sourceLine" id="cb551-2" data-line-number="2"><span class="co">#&gt;   n.n n.c       n.li c.1 c.2 c.3 c.4</span></a>
<a class="sourceLine" id="cb551-3" data-line-number="3"><span class="co">#&gt; 1   1   e          9   1   0   0   0</span></a>
<a class="sourceLine" id="cb551-4" data-line-number="4"><span class="co">#&gt; 2   2   f     10, 11   0   1   0   0</span></a>
<a class="sourceLine" id="cb551-5" data-line-number="5"><span class="co">#&gt; 3   3   g 12, 13, 14   0   0   1   0</span></a>
<a class="sourceLine" id="cb551-6" data-line-number="6"><span class="co">#&gt; 4   4   h       text   0   0   0   1</span></a>
<a class="sourceLine" id="cb551-7" data-line-number="7"><span class="co">#&gt;   li.n li.c      li.li</span></a>
<a class="sourceLine" id="cb551-8" data-line-number="8"><span class="co">#&gt; 1    1    e          9</span></a>
<a class="sourceLine" id="cb551-9" data-line-number="9"><span class="co">#&gt; 2    2    f     10, 11</span></a>
<a class="sourceLine" id="cb551-10" data-line-number="10"><span class="co">#&gt; 3    3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb551-11" data-line-number="11"><span class="co">#&gt; 4    4    h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb552-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[] &lt;-<span class="st"> </span>tbl2)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb554-1" data-line-number="1">tbl2[]</a>
<a class="sourceLine" id="cb554-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb554-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb554-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb554-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb554-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb554-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb554-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb554-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb555-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl2)</a>
<a class="sourceLine" id="cb555-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb555-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb555-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb555-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb555-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb555-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb555-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb555-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb556-1" data-line-number="1"><span class="kw">with_df2</span>(df2[] &lt;-<span class="st"> </span>df2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 1 row,
#&gt; need 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb558-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb558-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb558-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb558-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb558-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb558-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb558-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb558-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb558-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb559-1" data-line-number="1"><span class="kw">with_df2</span>(df2[] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 2 rows,
#&gt; need 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb561-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb563-1" data-line-number="1"><span class="kw">with_df2</span>(df2[] &lt;-<span class="st"> </span>df)</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; value = structure(list(n = 1:4, c =
#&gt; c("e", : provided 3 variables to replace
#&gt; 2 variables</code></pre>
</div>
<pre><code>#&gt;   tb m
#&gt; 1  1 e
#&gt; 2  2 f
#&gt; 3  3 g
#&gt; 4  4 h</code></pre>
</td>
<td>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb566-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[] &lt;-<span class="st"> </span>tbl)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="definition-of-x-j-" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-x-j-" class="anchor"></a>Definition of <code>x[, j]</code>.</h2>
<p><code>x[, j]</code> is equivalent to <code>x[j]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb568-1" data-line-number="1">tbl[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb568-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb568-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb568-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb568-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb568-6" data-line-number="6"><span class="co">#&gt; 2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb568-7" data-line-number="7"><span class="co">#&gt; 3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb568-8" data-line-number="8"><span class="co">#&gt; 4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb569-1" data-line-number="1">tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb569-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb569-3" data-line-number="3"><span class="co">#&gt;   c     li       </span></a>
<a class="sourceLine" id="cb569-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb569-5" data-line-number="5"><span class="co">#&gt; 1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb569-6" data-line-number="6"><span class="co">#&gt; 2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb569-7" data-line-number="7"><span class="co">#&gt; 3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb569-8" data-line-number="8"><span class="co">#&gt; 4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb570-1" data-line-number="1">tbl2[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb570-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb570-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb570-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb570-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb570-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb570-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb570-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb570-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb571-1" data-line-number="1">tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a>
<a class="sourceLine" id="cb571-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb571-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb571-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb571-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb571-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb571-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb571-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb571-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb572-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</a>
<a class="sourceLine" id="cb572-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb572-3" data-line-number="3"><span class="co">#&gt;       n     c li   </span></a>
<a class="sourceLine" id="cb572-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb572-5" data-line-number="5"><span class="co">#&gt; 1     1     1 e    </span></a>
<a class="sourceLine" id="cb572-6" data-line-number="6"><span class="co">#&gt; 2     2     2 f    </span></a>
<a class="sourceLine" id="cb572-7" data-line-number="7"><span class="co">#&gt; 3     3     3 g    </span></a>
<a class="sourceLine" id="cb572-8" data-line-number="8"><span class="co">#&gt; 4     4     4 h</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb573-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])</a>
<a class="sourceLine" id="cb573-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb573-3" data-line-number="3"><span class="co">#&gt;       n     c li   </span></a>
<a class="sourceLine" id="cb573-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb573-5" data-line-number="5"><span class="co">#&gt; 1     1     1 e    </span></a>
<a class="sourceLine" id="cb573-6" data-line-number="6"><span class="co">#&gt; 2     2     2 f    </span></a>
<a class="sourceLine" id="cb573-7" data-line-number="7"><span class="co">#&gt; 3     3     3 g    </span></a>
<a class="sourceLine" id="cb573-8" data-line-number="8"><span class="co">#&gt; 4     4     4 h</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb574-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb574-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb574-3" data-line-number="3"><span class="co">#&gt;   tb[,1]  [,2]  [,3]  [,4]   m$n $c   </span></a>
<a class="sourceLine" id="cb574-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb574-5" data-line-number="5"><span class="co">#&gt; 1      1     0     0     0     1 e    </span></a>
<a class="sourceLine" id="cb574-6" data-line-number="6"><span class="co">#&gt; 2      0     1     0     0     2 f    </span></a>
<a class="sourceLine" id="cb574-7" data-line-number="7"><span class="co">#&gt; 3      0     0     1     0     3 g    </span></a>
<a class="sourceLine" id="cb574-8" data-line-number="8"><span class="co">#&gt; 4      0     0     0     1     4 h    </span></a>
<a class="sourceLine" id="cb574-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: $li &lt;list&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb575-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span>tbl2[<span class="dv">2</span><span class="op">:</span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb575-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb575-3" data-line-number="3"><span class="co">#&gt;   tb[,1]  [,2]  [,3]  [,4]   m$n $c   </span></a>
<a class="sourceLine" id="cb575-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb575-5" data-line-number="5"><span class="co">#&gt; 1      1     0     0     0     1 e    </span></a>
<a class="sourceLine" id="cb575-6" data-line-number="6"><span class="co">#&gt; 2      0     1     0     0     2 f    </span></a>
<a class="sourceLine" id="cb575-7" data-line-number="7"><span class="co">#&gt; 3      0     0     1     0     3 g    </span></a>
<a class="sourceLine" id="cb575-8" data-line-number="8"><span class="co">#&gt; 4      0     0     0     1     4 h    </span></a>
<a class="sourceLine" id="cb575-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: $li &lt;list&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<div id="corollaries-4" class="section level3">
<h3 class="hasAnchor">
<a href="#corollaries-4" class="anchor"></a>Corollaries</h3>
<p><code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> always returns a tibble.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb576-1" data-line-number="1">df[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb576-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb577-1" data-line-number="1">tbl[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb577-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb577-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb577-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb577-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a>
<a class="sourceLine" id="cb577-6" data-line-number="6"><span class="co">#&gt; 2     2</span></a>
<a class="sourceLine" id="cb577-7" data-line-number="7"><span class="co">#&gt; 3     3</span></a>
<a class="sourceLine" id="cb577-8" data-line-number="8"><span class="co">#&gt; 4     4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb578-1" data-line-number="1">tbl[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb578-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb578-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb578-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb578-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a>
<a class="sourceLine" id="cb578-6" data-line-number="6"><span class="co">#&gt; 2     2</span></a>
<a class="sourceLine" id="cb578-7" data-line-number="7"><span class="co">#&gt; 3     3</span></a>
<a class="sourceLine" id="cb578-8" data-line-number="8"><span class="co">#&gt; 4     4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb579-1" data-line-number="1">tbl[, <span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">FALSE</span>]</a>
<a class="sourceLine" id="cb579-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 1</span></a>
<a class="sourceLine" id="cb579-3" data-line-number="3"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb579-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb579-5" data-line-number="5"><span class="co">#&gt; 1     1</span></a>
<a class="sourceLine" id="cb579-6" data-line-number="6"><span class="co">#&gt; 2     2</span></a>
<a class="sourceLine" id="cb579-7" data-line-number="7"><span class="co">#&gt; 3     3</span></a>
<a class="sourceLine" id="cb579-8" data-line-number="8"><span class="co">#&gt; 4     4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb580-1" data-line-number="1">df[<span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">FALSE</span>]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[.data.frame`(df, 1, drop =
#&gt; FALSE): 'drop' argument will be ignored</code></pre>
</div>
<pre><code>#&gt;   n
#&gt; 1 1
#&gt; 2 2
#&gt; 3 3
#&gt; 4 4</code></pre>
</td>
<td>
<div class="sourceCode" id="cb583"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb583-1" data-line-number="1">tbl[<span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">FALSE</span>]</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning: `drop` ignored</code></pre>
</div>
<pre><code>#&gt; # A tibble: 4 x 1
#&gt;       n
#&gt;   &lt;int&gt;
#&gt; 1     1
#&gt; 2     2
#&gt; 3     3
#&gt; 4     4</code></pre>
</td>
</tr>
</tbody></table>
<p><code>x[,]</code> is equivalent to <code>x[]</code>.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb586-1" data-line-number="1">tbl[,]</a>
<a class="sourceLine" id="cb586-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb586-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb586-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb586-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb586-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb586-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb586-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb587-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[,] &lt;-<span class="st"> </span>tbl)</a>
<a class="sourceLine" id="cb587-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb587-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb587-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb587-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb587-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb587-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb587-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb588-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[,] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb588-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb588-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb588-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb588-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb588-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb588-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1]&gt;</span></a>
<a class="sourceLine" id="cb588-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb589-1" data-line-number="1"><span class="kw">with_df</span>(df[,] &lt;-<span class="st"> </span>df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a>
<a class="sourceLine" id="cb589-2" data-line-number="2"><span class="co">#&gt;   n c     li</span></a>
<a class="sourceLine" id="cb589-3" data-line-number="3"><span class="co">#&gt; 1 1 e      9</span></a>
<a class="sourceLine" id="cb589-4" data-line-number="4"><span class="co">#&gt; 2 2 f 10, 11</span></a>
<a class="sourceLine" id="cb589-5" data-line-number="5"><span class="co">#&gt; 3 1 e      9</span></a>
<a class="sourceLine" id="cb589-6" data-line-number="6"><span class="co">#&gt; 4 2 f 10, 11</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb590-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[,] &lt;-<span class="st"> </span>tbl[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb592-1" data-line-number="1"><span class="kw">with_df</span>(df[,] &lt;-<span class="st"> </span>df2)</a>
<a class="sourceLine" id="cb592-2" data-line-number="2"><span class="co">#&gt;   n.n n.c       n.li c.1 c.2 c.3 c.4</span></a>
<a class="sourceLine" id="cb592-3" data-line-number="3"><span class="co">#&gt; 1   1   e          9   1   0   0   0</span></a>
<a class="sourceLine" id="cb592-4" data-line-number="4"><span class="co">#&gt; 2   2   f     10, 11   0   1   0   0</span></a>
<a class="sourceLine" id="cb592-5" data-line-number="5"><span class="co">#&gt; 3   3   g 12, 13, 14   0   0   1   0</span></a>
<a class="sourceLine" id="cb592-6" data-line-number="6"><span class="co">#&gt; 4   4   h       text   0   0   0   1</span></a>
<a class="sourceLine" id="cb592-7" data-line-number="7"><span class="co">#&gt;   li.n li.c      li.li</span></a>
<a class="sourceLine" id="cb592-8" data-line-number="8"><span class="co">#&gt; 1    1    e          9</span></a>
<a class="sourceLine" id="cb592-9" data-line-number="9"><span class="co">#&gt; 2    2    f     10, 11</span></a>
<a class="sourceLine" id="cb592-10" data-line-number="10"><span class="co">#&gt; 3    3    g 12, 13, 14</span></a>
<a class="sourceLine" id="cb592-11" data-line-number="11"><span class="co">#&gt; 4    4    h       text</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb593-1" data-line-number="1"><span class="kw">with_tbl</span>(tbl[,] &lt;-<span class="st"> </span>tbl2)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 3. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb595-1" data-line-number="1">tbl2[,]</a>
<a class="sourceLine" id="cb595-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb595-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb595-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb595-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb595-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb595-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb595-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb595-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb596-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[,] &lt;-<span class="st"> </span>tbl2)</a>
<a class="sourceLine" id="cb596-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb596-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb596-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb596-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb596-6" data-line-number="6"><span class="co">#&gt; 2     2 f     &lt;int [2…     0     1     0</span></a>
<a class="sourceLine" id="cb596-7" data-line-number="7"><span class="co">#&gt; 3     3 g     &lt;int [3…     0     0     1</span></a>
<a class="sourceLine" id="cb596-8" data-line-number="8"><span class="co">#&gt; 4     4 h     &lt;chr [1…     0     0     0</span></a>
<a class="sourceLine" id="cb596-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb597-1" data-line-number="1"><span class="kw">with_df2</span>(df2[,] &lt;-<span class="st"> </span>df2[<span class="dv">1</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; , value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 1 row,
#&gt; need 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb599-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[,] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span>, ])</a>
<a class="sourceLine" id="cb599-2" data-line-number="2"><span class="co">#&gt; # A tibble: 4 x 2</span></a>
<a class="sourceLine" id="cb599-3" data-line-number="3"><span class="co">#&gt;    tb$n $c    $li      m[,1]  [,2]  [,3]</span></a>
<a class="sourceLine" id="cb599-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb599-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb599-6" data-line-number="6"><span class="co">#&gt; 2     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb599-7" data-line-number="7"><span class="co">#&gt; 3     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb599-8" data-line-number="8"><span class="co">#&gt; 4     1 e     &lt;dbl [1…     1     0     0</span></a>
<a class="sourceLine" id="cb599-9" data-line-number="9"><span class="co">#&gt; # … with 1 more variable: [,4] &lt;dbl&gt;</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb600-1" data-line-number="1"><span class="kw">with_df2</span>(df2[,] &lt;-<span class="st"> </span>df2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Error in `[&lt;-.data.frame`(`*tmp*`, ,
#&gt; , value = structure(list(tb =
#&gt; structure(list(: replacement element
#&gt; 1 is a matrix/data frame of 2 rows,
#&gt; need 4</code></pre>
</div>
</td>
<td>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb602-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[,] &lt;-<span class="st"> </span>tbl2[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ])</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 2 cannot be
#&gt; recycled to
#&gt; length 4. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb604-1" data-line-number="1"><span class="kw">with_df2</span>(df2[,] &lt;-<span class="st"> </span>df)</a></code></pre></div>
<div class="warning">
<pre><code>#&gt; Warning in `[&lt;-.data.frame`(`*tmp*`, , ,
#&gt; value = structure(list(n = 1:4, :
#&gt; provided 3 variables to replace 2
#&gt; variables</code></pre>
</div>
<pre><code>#&gt;   tb m
#&gt; 1  1 e
#&gt; 2  2 f
#&gt; 3  3 g
#&gt; 4  4 h</code></pre>
</td>
<td>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb607-1" data-line-number="1"><span class="kw">with_tbl2</span>(tbl2[,] &lt;-<span class="st"> </span>tbl)</a></code></pre></div>
<div class="error">
<pre><code>#&gt; Vector of length 3 cannot be
#&gt; recycled to
#&gt; length 2. Only vectors of length one
#&gt; or
#&gt; of the same length can be recycled.</code></pre>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="exception-2" class="section level3">
<h3 class="hasAnchor">
<a href="#exception-2" class="anchor"></a>Exception</h3>
<p><code>drop = TRUE</code> returns a vector when subsetting a single column with <code>x[, j]</code>, this is for backward compatibility with code that uses an explicit <code>drop = TRUE</code> to access columns as vectors.</p>
<table class="table dftbl"><tbody>
<tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb609-1" data-line-number="1">tbl[, <span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb609-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
</td>
</tr>
<tr style="vertical-align:top">
<td>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb610-1" data-line-number="1">df[<span class="dv">1</span>, , drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb610-2" data-line-number="2"><span class="co">#&gt; $n</span></a>
<a class="sourceLine" id="cb610-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb610-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb610-5" data-line-number="5"><span class="co">#&gt; $c</span></a>
<a class="sourceLine" id="cb610-6" data-line-number="6"><span class="co">#&gt; [1] "e"</span></a>
<a class="sourceLine" id="cb610-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb610-8" data-line-number="8"><span class="co">#&gt; $li</span></a>
<a class="sourceLine" id="cb610-9" data-line-number="9"><span class="co">#&gt; $li[[1]]</span></a>
<a class="sourceLine" id="cb610-10" data-line-number="10"><span class="co">#&gt; [1] 9</span></a></code></pre></div>
</td>
<td>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb611-1" data-line-number="1">tbl[<span class="dv">1</span>, , drop =<span class="st"> </span><span class="ot">TRUE</span>]</a>
<a class="sourceLine" id="cb611-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1 x 3</span></a>
<a class="sourceLine" id="cb611-3" data-line-number="3"><span class="co">#&gt;       n c     li       </span></a>
<a class="sourceLine" id="cb611-4" data-line-number="4"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb611-5" data-line-number="5"><span class="co">#&gt; 1     1 e     &lt;dbl [1]&gt;</span></a></code></pre></div>
</td>
</tr>
</tbody></table>
<table class="table dftbl"><tbody><tr style="vertical-align:top">
<td>
</td>
<td>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb612-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/stopifnot.html">stopifnot</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(tbl, <span class="kw">new_tbl</span>()))</a></code></pre></div>
</td>
</tr></tbody></table>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#columns">Columns</a><ul class="nav nav-pills nav-stacked">
<li><a href="#definition-of-xj-">Definition of <code>x[[j]]</code>.</a></li>
      <li><a href="#definition-of-xj---a-">Definition of <code>x[[j]] &lt;- a</code>.</a></li>
      <li><a href="#columns-dont-have-inner-names-">Columns don’t have inner names.</a></li>
      <li><a href="#definition-of-xname-">Definition of <code>x$name</code>.</a></li>
      <li><a href="#definition-of-xj--1">Definition of <code>x[j]</code>.</a></li>
      <li><a href="#definition-of-xj---list----">Definition of <code>x[j] &lt;- list(...)</code>.</a></li>
      <li><a href="#definition-of-xj---lista-">Definition of <code>x[j] &lt;- list(a)</code>.</a></li>
      <li><a href="#definition-of-xj---a--1">Definition of <code>x[j] &lt;- a</code>.</a></li>
      </ul>
</li>
      <li>
<a href="#rows">Rows</a><ul class="nav nav-pills nav-stacked">
<li><a href="#definition-of-xi--">Definition of <code>x[i, ]</code>.</a></li>
      <li><a href="#definition-of-xi-j-">Definition of <code>x[i, j]</code>.</a></li>
      <li><a href="#definition-of-xi-j--1">Definition of <code>x[[i, j]]</code>.</a></li>
      </ul>
</li>
      <li>
<a href="#missing-j-indexes">Missing <code>j</code> indexes</a><ul class="nav nav-pills nav-stacked">
<li><a href="#definition-of-x-">Definition of <code>x[]</code>.</a></li>
      <li><a href="#definition-of-x-j-">Definition of <code>x[, j]</code>.</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="tidyverse">
  <p>tibble is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href="http://krlmlr.info">Kirill Müller</a>, <a href="http://hadley.nz">Hadley Wickham</a>.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '24f802ea87b9d1054ef63db70ff7c836',
    indexName: 'tibble',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
